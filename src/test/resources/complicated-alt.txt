KarateFile:complicated.feature
  GherkinFeature:Nested JSON and Dynamic Expressions
    PsiElement(FEATURE_KEYWORD)('Feature:')
    PsiElement(TEXT)('Nested JSON and Dynamic Expressions')
    GherkinScenario:
      PsiElement(SCENARIO_KEYWORD)('Scenario:')
      PsiElement(TEXT)('Process deeply nested JSON with dynamic expressions')
      GherkinStep:
        PsiElement(STEP_KEYWORD)('*')
        PsiElement(ACTION_KEYWORD)('def')
        KarateDeclaration(declaration)
          PsiElement(DECLARATION)('input')
        PsiElement(OPERATOR)('=')
        GherkinPystring
          KarateEmbeddedJsonElement(json_element)
            KarateEmbeddedJsonElement(json_element)
              JsonObject
                PsiElement({)('{')
                JsonProperty
                  JsonStringLiteral
                    PsiElement(DOUBLE_QUOTED_STRING)('"outer"')
                  PsiElement(:)(':')
                  JsonObject
                    PsiElement({)('{')
                    JsonProperty
                      JsonStringLiteral
                        PsiElement(DOUBLE_QUOTED_STRING)('"inner"')
                      PsiElement(:)(':')
                      JsonObject
                        PsiElement({)('{')
                        JsonProperty
                          JsonStringLiteral
                            PsiElement(DOUBLE_QUOTED_STRING)('"key"')
                          PsiElement(:)(':')
                          JsonStringLiteral
                            PsiElement(DOUBLE_QUOTED_STRING)('"#[randomString(5)]"')
                        PsiElement(})('}')
                    PsiElement(})('}')
                PsiElement(})('}')
      GherkinStep:karate.jsonPath
        PsiElement(STEP_KEYWORD)('*')
        PsiElement(ACTION_KEYWORD)('def')
        KarateDeclaration(declaration)
          PsiElement(DECLARATION)('expected')
        PsiElement(OPERATOR)('=')
        PsiElement(TEXT)('karate.jsonPath')
        KarateParenElement(paren element)
          PsiElement(OPEN_PAREN)('(')
          PsiElement(TEXT)('input,')
          PsiElement(SINGLE_QUOTED_STRING)(''$.outer.inner.key'')
        PsiElement(CLOSE_PAREN)(')')
      GherkinStep:
        PsiElement(STEP_KEYWORD)('*')
        PsiElement(ACTION_KEYWORD)('def')
        KarateDeclaration(declaration)
          PsiElement(DECLARATION)('dynamicResult')
        PsiElement(OPERATOR)('=')
        GherkinPystring
          KarateEmbeddedJavascriptElement(javascript_element)
            KarateEmbeddedJavascriptElement(javascript_element)
              KarateEmbeddedJavascriptElement(PROGRAM)
                KarateEmbeddedJavascriptElement(STATEMENT)
                  KarateEmbeddedJavascriptElement(EXPR)
                    KarateEmbeddedJavascriptElement(FN_EXPR)
                      PsiElement(FUNCTION)('function')
                      PsiElement(L_PAREN)('(')
                      KarateEmbeddedJavascriptElement(FN_DECL_ARGS)
                        <empty list>
                      PsiElement(R_PAREN)(')')
                      PsiElement(WS)(' ')
                      KarateEmbeddedJavascriptElement(BLOCK)
                        PsiElement(L_CURLY)('{')
                        PsiElement(WS_LF)('\n      ')
                        KarateEmbeddedJavascriptElement(STATEMENT)
                          KarateEmbeddedJavascriptElement(VAR_STMT)
                            PsiElement(VAR)('var')
                            PsiElement(WS)(' ')
                            KarateEmbeddedJavascriptElement(VAR_STMT_NAMES)
                              PsiElement(IDENT)('result')
                            PsiElement(WS)(' ')
                            PsiElement(EQ)('=')
                            PsiElement(WS)(' ')
                            KarateEmbeddedJavascriptElement(EXPR)
                              KarateEmbeddedJavascriptElement(REF_EXPR)
                                PsiElement(IDENT)('karate')
                              KarateEmbeddedJavascriptElement(REF_DOT_EXPR)
                                PsiElement(DOT)('.')
                                PsiElement(IDENT)('jsonPath')
                              KarateEmbeddedJavascriptElement(FN_CALL_EXPR)
                                PsiElement(L_PAREN)('(')
                                KarateEmbeddedJavascriptElement(FN_CALL_ARGS)
                                  KarateEmbeddedJavascriptElement(FN_CALL_ARG)
                                    KarateEmbeddedJavascriptElement(EXPR)
                                      KarateEmbeddedJavascriptElement(REF_EXPR)
                                        PsiElement(IDENT)('input')
                                    PsiElement(COMMA)(',')
                                  PsiElement(WS)(' ')
                                  KarateEmbeddedJavascriptElement(FN_CALL_ARG)
                                    KarateEmbeddedJavascriptElement(EXPR)
                                      KarateEmbeddedJavascriptElement(LIT_EXPR)
                                        PsiElement(S_STRING)(''$.outer.inner.key'')
                                PsiElement(R_PAREN)(')')
                          KarateEmbeddedJavascriptElement(EOS)
                            PsiElement(SEMI)(';')
                        PsiElement(WS_LF)('\n      ')
                        KarateEmbeddedJavascriptElement(STATEMENT)
                          KarateEmbeddedJavascriptElement(RETURN_STMT)
                            PsiElement(RETURN)('return')
                            PsiElement(WS)(' ')
                            KarateEmbeddedJavascriptElement(EXPR)
                              KarateEmbeddedJavascriptElement(REF_EXPR)
                                PsiElement(IDENT)('result')
                              PsiElement(WS)(' ')
                              KarateEmbeddedJavascriptElement(LOGIC_EXPR)
                                PsiElement(EQ_EQ)('==')
                                PsiElement(WS)(' ')
                                KarateEmbeddedJavascriptElement(EXPR)
                                  KarateEmbeddedJavascriptElement(REF_EXPR)
                                    PsiElement(IDENT)('expected')
                          KarateEmbeddedJavascriptElement(EOS)
                            PsiElement(SEMI)(';')
                        PsiElement(WS_LF)('\n    ')
                        PsiElement(R_CURLY)('}')
      GherkinStep:true
        PsiElement(STEP_KEYWORD)('*')
        PsiElement(ACTION_KEYWORD)('match')
        KarateDeclaration(variable)
          PsiElement(VARIABLE)('dynamicResult()')
        PsiElement(OPERATOR)('==')
        PsiElement(TEXT)('true')
      GherkinStep:
        PsiElement(STEP_KEYWORD)('*')
        PsiElement(ACTION_KEYWORD)('print')
        PsiElement(SINGLE_QUOTED_STRING)(''Dynamic result validation passed!'')
    GherkinScenario:
      PsiElement(SCENARIO_KEYWORD)('Scenario:')
      PsiElement(TEXT)('Use a custom Java class to manipulate data')
      GherkinStep:Java.type
        PsiElement(STEP_KEYWORD)('*')
        PsiElement(ACTION_KEYWORD)('def')
        KarateDeclaration(declaration)
          PsiElement(DECLARATION)('MyJavaClass')
        PsiElement(OPERATOR)('=')
        PsiElement(TEXT)('Java.type')
        KarateParenElement(paren element)
          PsiElement(OPEN_PAREN)('(')
          PsiElement(SINGLE_QUOTED_STRING)(''com.example.MyJavaClass'')
        PsiElement(CLOSE_PAREN)(')')
      GherkinStep:new MyJavaClass
        PsiElement(STEP_KEYWORD)('*')
        PsiElement(ACTION_KEYWORD)('def')
        KarateDeclaration(declaration)
          PsiElement(DECLARATION)('instance')
        PsiElement(OPERATOR)('=')
        PsiElement(TEXT)('new')
        PsiElement(TEXT)('MyJavaClass')
        KarateParenElement(paren element)
          PsiElement(OPEN_PAREN)('(')
        PsiElement(CLOSE_PAREN)(')')
      GherkinStep:
        PsiElement(STEP_KEYWORD)('*')
        PsiElement(ACTION_KEYWORD)('def')
        KarateDeclaration(declaration)
          PsiElement(DECLARATION)('complexOperation')
        PsiElement(OPERATOR)('=')
        GherkinPystring
          KarateEmbeddedJavascriptElement(javascript_element)
            KarateEmbeddedJavascriptElement(javascript_element)
              KarateEmbeddedJavascriptElement(PROGRAM)
                KarateEmbeddedJavascriptElement(STATEMENT)
                  KarateEmbeddedJavascriptElement(EXPR)
                    KarateEmbeddedJavascriptElement(FN_EXPR)
                      PsiElement(FUNCTION)('function')
                      PsiElement(WS)(' ')
                      PsiElement(L_PAREN)('(')
                      KarateEmbeddedJavascriptElement(FN_DECL_ARGS)
                        KarateEmbeddedJavascriptElement(FN_DECL_ARG)
                          PsiElement(IDENT)('data')
                      PsiElement(R_PAREN)(')')
                      KarateEmbeddedJavascriptElement(BLOCK)
                        PsiElement(L_CURLY)('{')
                        KarateEmbeddedJavascriptElement(STATEMENT)
                          KarateEmbeddedJavascriptElement(RETURN_STMT)
                            PsiElement(RETURN)('return')
                            PsiElement(WS)(' ')
                            KarateEmbeddedJavascriptElement(EXPR)
                              KarateEmbeddedJavascriptElement(REF_EXPR)
                                PsiElement(IDENT)('instance')
                              KarateEmbeddedJavascriptElement(REF_DOT_EXPR)
                                PsiElement(DOT)('.')
                                PsiElement(IDENT)('processData')
                              KarateEmbeddedJavascriptElement(FN_CALL_EXPR)
                                PsiElement(L_PAREN)('(')
                                KarateEmbeddedJavascriptElement(FN_CALL_ARGS)
                                  KarateEmbeddedJavascriptElement(FN_CALL_ARG)
                                    KarateEmbeddedJavascriptElement(EXPR)
                                      KarateEmbeddedJavascriptElement(REF_EXPR)
                                        PsiElement(IDENT)('data')
                                PsiElement(R_PAREN)(')')
                          KarateEmbeddedJavascriptElement(EOS)
                            PsiElement(SEMI)(';')
                        PsiElement(R_CURLY)('}')
      GherkinStep:
        PsiElement(STEP_KEYWORD)('*')
        PsiElement(ACTION_KEYWORD)('def')
        KarateDeclaration(declaration)
          PsiElement(DECLARATION)('input')
        PsiElement(OPERATOR)('=')
        GherkinPystring
          KarateEmbeddedJsonElement(json_element)
            KarateEmbeddedJsonElement(json_element)
              JsonArray
                PsiElement([)('[')
                JsonNumberLiteral
                  PsiElement(NUMBER)('1')
                PsiElement(,)(',')
                JsonNumberLiteral
                  PsiElement(NUMBER)('2')
                PsiElement(,)(',')
                JsonNumberLiteral
                  PsiElement(NUMBER)('3')
                PsiElement(,)(',')
                JsonNumberLiteral
                  PsiElement(NUMBER)('4')
                PsiElement(])(']')
      GherkinStep:complexOperation
        PsiElement(STEP_KEYWORD)('*')
        PsiElement(ACTION_KEYWORD)('def')
        KarateDeclaration(declaration)
          PsiElement(DECLARATION)('result')
        PsiElement(OPERATOR)('=')
        PsiElement(TEXT)('complexOperation')
        KarateParenElement(paren element)
          PsiElement(OPEN_PAREN)('(')
          PsiElement(TEXT)('input')
        PsiElement(CLOSE_PAREN)(')')
      GherkinStep:
        PsiElement(STEP_KEYWORD)('*')
        PsiElement(ACTION_KEYWORD)('match')
        KarateDeclaration(variable)
          PsiElement(VARIABLE)('result')
        PsiElement(OPERATOR)('==')
        GherkinPystring
          KarateEmbeddedJsonElement(json_element)
            KarateEmbeddedJsonElement(json_element)
              JsonArray
                PsiElement([)('[')
                JsonNumberLiteral
                  PsiElement(NUMBER)('2')
                PsiElement(,)(',')
                JsonNumberLiteral
                  PsiElement(NUMBER)('4')
                PsiElement(,)(',')
                JsonNumberLiteral
                  PsiElement(NUMBER)('6')
                PsiElement(,)(',')
                JsonNumberLiteral
                  PsiElement(NUMBER)('8')
                PsiElement(])(']')
    GherkinScenarioOutline:Test with edge-case data inputs
      PsiElement(SCENARIO_OUTLINE_KEYWORD)('Scenario Outline:')
      PsiElement(TEXT)('Test with edge-case data inputs')
      GherkinStep:
        PsiElement(STEP_KEYWORD)('*')
        PsiElement(ACTION_KEYWORD)('def')
        KarateDeclaration(declaration)
          PsiElement(DECLARATION)('calculate')
        PsiElement(OPERATOR)('=')
        GherkinPystring
          KarateEmbeddedJavascriptElement(javascript_element)
            KarateEmbeddedJavascriptElement(javascript_element)
              KarateEmbeddedJavascriptElement(PROGRAM)
                KarateEmbeddedJavascriptElement(STATEMENT)
                  KarateEmbeddedJavascriptElement(EXPR)
                    KarateEmbeddedJavascriptElement(FN_EXPR)
                      PsiElement(FUNCTION)('function')
                      PsiElement(WS)(' ')
                      PsiElement(L_PAREN)('(')
                      KarateEmbeddedJavascriptElement(FN_DECL_ARGS)
                        KarateEmbeddedJavascriptElement(FN_DECL_ARG)
                          PsiElement(IDENT)('a')
                          PsiElement(COMMA)(',')
                        PsiElement(WS)(' ')
                        KarateEmbeddedJavascriptElement(FN_DECL_ARG)
                          PsiElement(IDENT)('b')
                      PsiElement(R_PAREN)(')')
                      PsiElement(WS)(' ')
                      KarateEmbeddedJavascriptElement(BLOCK)
                        PsiElement(L_CURLY)('{')
                        PsiElement(WS)(' ')
                        KarateEmbeddedJavascriptElement(STATEMENT)
                          KarateEmbeddedJavascriptElement(RETURN_STMT)
                            PsiElement(RETURN)('return')
                            PsiElement(WS)(' ')
                            KarateEmbeddedJavascriptElement(EXPR)
                              KarateEmbeddedJavascriptElement(REF_EXPR)
                                PsiElement(IDENT)('a')
                              PsiElement(WS)(' ')
                              KarateEmbeddedJavascriptElement(MATH_MUL_EXPR)
                                PsiElement(SLASH)('/')
                                PsiElement(WS)(' ')
                                KarateEmbeddedJavascriptElement(EXPR)
                                  KarateEmbeddedJavascriptElement(REF_EXPR)
                                    PsiElement(IDENT)('b')
                          KarateEmbeddedJavascriptElement(EOS)
                            PsiElement(SEMI)(';')
                        PsiElement(WS)(' ')
                        PsiElement(R_CURLY)('}')
      GherkinStep:a
        PsiElement(STEP_KEYWORD)('Given')
        PsiElement(TEXT)('a')
        PsiElement(OPERATOR)('=')
        GherkinPystring
          KarateEmbeddedJavascriptElement(xml_element)
            XmlToken:XML_START_TAG_START('<')
            XmlToken:XML_NAME('a')
            XmlToken:XML_TAG_END('>')
            XmlToken:XML_DATA_CHARACTERS('and')
            XmlToken:XML_DATA_CHARACTERS('b')
            XmlToken:XML_DATA_CHARACTERS('=')
            XmlToken:XML_START_TAG_START('<')
            XmlToken:XML_NAME('b')
            XmlToken:XML_TAG_END('>')
      GherkinStep:result   calculate
        PsiElement(STEP_KEYWORD)('When')
        PsiElement(TEXT)('result')
        PsiElement(OPERATOR)('=')
        PsiElement(ACTION_KEYWORD)('call')
        PsiElement(TEXT)('calculate')
        KarateParenElement(paren element)
          PsiElement(OPEN_PAREN)('(')
          PsiElement(TEXT)('a,')
          PsiElement(TEXT)('b')
        PsiElement(CLOSE_PAREN)(')')
      GherkinStep:<expected>
        PsiElement(STEP_KEYWORD)('Then')
        PsiElement(ACTION_KEYWORD)('match')
        KarateDeclaration(variable)
          PsiElement(VARIABLE)('result')
        PsiElement(OPERATOR)('==')
        PsiElement(TEXT)('<expected>')
      GherkinExamplesBlock:
        PsiElement(EXAMPLES_KEYWORD)('Examples')
        PsiElement(COLON)(':')
        GherkinTable
          GherkinTableHeaderRow
            PsiElement(PIPE)('|')
            GherkinTableCellImpl(table cell)
              PsiElement(TABLE_CELL)('a')
            PsiElement(PIPE)('|')
            GherkinTableCellImpl(table cell)
              PsiElement(TABLE_CELL)('b')
            PsiElement(PIPE)('|')
            GherkinTableCellImpl(table cell)
              PsiElement(TABLE_CELL)('expected')
            PsiElement(PIPE)('|')
          GherkinTableRow
            PsiElement(PIPE)('|')
            GherkinTableCellImpl(table cell)
              PsiElement(TABLE_CELL)('10')
            PsiElement(PIPE)('|')
            GherkinTableCellImpl(table cell)
              PsiElement(TABLE_CELL)('2')
            PsiElement(PIPE)('|')
            GherkinTableCellImpl(table cell)
              PsiElement(TABLE_CELL)('5')
            PsiElement(PIPE)('|')
          GherkinTableRow
            PsiElement(PIPE)('|')
            GherkinTableCellImpl(table cell)
              PsiElement(TABLE_CELL)('-10')
            PsiElement(PIPE)('|')
            GherkinTableCellImpl(table cell)
              PsiElement(TABLE_CELL)('5')
            PsiElement(PIPE)('|')
            GherkinTableCellImpl(table cell)
              PsiElement(TABLE_CELL)('-2')
            PsiElement(PIPE)('|')
          GherkinTableRow
            PsiElement(PIPE)('|')
            GherkinTableCellImpl(table cell)
              PsiElement(TABLE_CELL)('1000')
            PsiElement(PIPE)('|')
            GherkinTableCellImpl(table cell)
              PsiElement(TABLE_CELL)('0.5')
            PsiElement(PIPE)('|')
            GherkinTableCellImpl(table cell)
              PsiElement(TABLE_CELL)('2000')
            PsiElement(PIPE)('|')
          GherkinTableRow
            PsiElement(PIPE)('|')
            GherkinTableCellImpl(table cell)
              PsiElement(TABLE_CELL)('1e6')
            PsiElement(PIPE)('|')
            GherkinTableCellImpl(table cell)
              PsiElement(TABLE_CELL)('1e-3')
            PsiElement(PIPE)('|')
            GherkinTableCellImpl(table cell)
              PsiElement(TABLE_CELL)('1e9')
            PsiElement(PIPE)('|')
    GherkinScenario:
      PsiElement(SCENARIO_KEYWORD)('Scenario:')
      PsiElement(TEXT)('Retry API call until success')
      GherkinStep:
        PsiElement(STEP_KEYWORD)('*')
        PsiElement(ACTION_KEYWORD)('def')
        KarateDeclaration(declaration)
          PsiElement(DECLARATION)('retryApiCall')
        PsiElement(OPERATOR)('=')
        GherkinPystring
          KarateEmbeddedJavascriptElement(javascript_element)
            KarateEmbeddedJavascriptElement(javascript_element)
              KarateEmbeddedJavascriptElement(PROGRAM)
                KarateEmbeddedJavascriptElement(STATEMENT)
                  KarateEmbeddedJavascriptElement(EXPR)
                    KarateEmbeddedJavascriptElement(FN_EXPR)
                      PsiElement(FUNCTION)('function')
                      PsiElement(L_PAREN)('(')
                      KarateEmbeddedJavascriptElement(FN_DECL_ARGS)
                        <empty list>
                      PsiElement(R_PAREN)(')')
                      PsiElement(WS)(' ')
                      KarateEmbeddedJavascriptElement(BLOCK)
                        PsiElement(L_CURLY)('{')
                        PsiElement(WS_LF)('\n      ')
                        KarateEmbeddedJavascriptElement(STATEMENT)
                          KarateEmbeddedJavascriptElement(VAR_STMT)
                            PsiElement(VAR)('var')
                            PsiElement(WS)(' ')
                            KarateEmbeddedJavascriptElement(VAR_STMT_NAMES)
                              PsiElement(IDENT)('maxAttempts')
                            PsiElement(WS)(' ')
                            PsiElement(EQ)('=')
                            PsiElement(WS)(' ')
                            KarateEmbeddedJavascriptElement(EXPR)
                              KarateEmbeddedJavascriptElement(LIT_EXPR)
                                PsiElement(NUMBER)('3')
                          KarateEmbeddedJavascriptElement(EOS)
                            PsiElement(SEMI)(';')
                        PsiElement(WS_LF)('\n      ')
                        KarateEmbeddedJavascriptElement(STATEMENT)
                          KarateEmbeddedJavascriptElement(FOR_STMT)
                            PsiElement(FOR)('for')
                            PsiElement(WS)(' ')
                            PsiElement(L_PAREN)('(')
                            KarateEmbeddedJavascriptElement(VAR_STMT)
                              PsiElement(VAR)('var')
                              PsiElement(WS)(' ')
                              KarateEmbeddedJavascriptElement(VAR_STMT_NAMES)
                                PsiElement(IDENT)('i')
                              PsiElement(WS)(' ')
                              PsiElement(EQ)('=')
                              PsiElement(WS)(' ')
                              KarateEmbeddedJavascriptElement(EXPR)
                                KarateEmbeddedJavascriptElement(LIT_EXPR)
                                  PsiElement(NUMBER)('0')
                            PsiElement(SEMI)(';')
                            PsiElement(WS)(' ')
                            KarateEmbeddedJavascriptElement(EXPR)
                              KarateEmbeddedJavascriptElement(REF_EXPR)
                                PsiElement(IDENT)('i')
                              PsiElement(WS)(' ')
                              KarateEmbeddedJavascriptElement(LOGIC_EXPR)
                                PsiElement(LT)('<')
                                PsiElement(WS)(' ')
                                KarateEmbeddedJavascriptElement(EXPR)
                                  KarateEmbeddedJavascriptElement(REF_EXPR)
                                    PsiElement(IDENT)('maxAttempts')
                            PsiElement(SEMI)(';')
                            PsiElement(WS)(' ')
                            KarateEmbeddedJavascriptElement(EXPR)
                              KarateEmbeddedJavascriptElement(REF_EXPR)
                                PsiElement(IDENT)('i')
                              KarateEmbeddedJavascriptElement(MATH_POST_EXPR)
                                PsiElement(PLUS_PLUS)('++')
                            PsiElement(R_PAREN)(')')
                            PsiElement(WS)(' ')
                            KarateEmbeddedJavascriptElement(STATEMENT)
                              KarateEmbeddedJavascriptElement(BLOCK)
                                PsiElement(L_CURLY)('{')
                                PsiElement(WS_LF)('\n        ')
                                KarateEmbeddedJavascriptElement(STATEMENT)
                                  KarateEmbeddedJavascriptElement(VAR_STMT)
                                    PsiElement(VAR)('var')
                                    PsiElement(WS)(' ')
                                    KarateEmbeddedJavascriptElement(VAR_STMT_NAMES)
                                      PsiElement(IDENT)('response')
                                    PsiElement(WS)(' ')
                                    PsiElement(EQ)('=')
                                    PsiElement(WS)(' ')
                                    KarateEmbeddedJavascriptElement(EXPR)
                                      KarateEmbeddedJavascriptElement(REF_EXPR)
                                        PsiElement(IDENT)('karate')
                                      KarateEmbeddedJavascriptElement(REF_DOT_EXPR)
                                        PsiElement(DOT)('.')
                                        PsiElement(IDENT)('call')
                                      KarateEmbeddedJavascriptElement(FN_CALL_EXPR)
                                        PsiElement(L_PAREN)('(')
                                        KarateEmbeddedJavascriptElement(FN_CALL_ARGS)
                                          KarateEmbeddedJavascriptElement(FN_CALL_ARG)
                                            KarateEmbeddedJavascriptElement(EXPR)
                                              KarateEmbeddedJavascriptElement(LIT_EXPR)
                                                PsiElement(S_STRING)(''myApi.feature'')
                                        PsiElement(R_PAREN)(')')
                                  KarateEmbeddedJavascriptElement(EOS)
                                    PsiElement(SEMI)(';')
                                PsiElement(WS_LF)('\n        ')
                                KarateEmbeddedJavascriptElement(STATEMENT)
                                  KarateEmbeddedJavascriptElement(IF_STMT)
                                    PsiElement(IF)('if')
                                    PsiElement(WS)(' ')
                                    PsiElement(L_PAREN)('(')
                                    KarateEmbeddedJavascriptElement(EXPR)
                                      KarateEmbeddedJavascriptElement(REF_EXPR)
                                        PsiElement(IDENT)('response')
                                      KarateEmbeddedJavascriptElement(REF_DOT_EXPR)
                                        PsiElement(DOT)('.')
                                        PsiElement(IDENT)('status')
                                      PsiElement(WS)(' ')
                                      KarateEmbeddedJavascriptElement(LOGIC_EXPR)
                                        PsiElement(EQ_EQ)('==')
                                        PsiElement(WS)(' ')
                                        KarateEmbeddedJavascriptElement(EXPR)
                                          KarateEmbeddedJavascriptElement(LIT_EXPR)
                                            PsiElement(NUMBER)('200')
                                    PsiElement(R_PAREN)(')')
                                    PsiElement(WS)(' ')
                                    KarateEmbeddedJavascriptElement(STATEMENT)
                                      KarateEmbeddedJavascriptElement(RETURN_STMT)
                                        PsiElement(RETURN)('return')
                                        PsiElement(WS)(' ')
                                        KarateEmbeddedJavascriptElement(EXPR)
                                          KarateEmbeddedJavascriptElement(REF_EXPR)
                                            PsiElement(IDENT)('response')
                                      KarateEmbeddedJavascriptElement(EOS)
                                        PsiElement(SEMI)(';')
                                PsiElement(WS_LF)('\n        ')
                                KarateEmbeddedJavascriptElement(STATEMENT)
                                  KarateEmbeddedJavascriptElement(EXPR)
                                    KarateEmbeddedJavascriptElement(REF_EXPR)
                                      PsiElement(IDENT)('karate')
                                    KarateEmbeddedJavascriptElement(REF_DOT_EXPR)
                                      PsiElement(DOT)('.')
                                      PsiElement(IDENT)('sleep')
                                    KarateEmbeddedJavascriptElement(FN_CALL_EXPR)
                                      PsiElement(L_PAREN)('(')
                                      KarateEmbeddedJavascriptElement(FN_CALL_ARGS)
                                        KarateEmbeddedJavascriptElement(FN_CALL_ARG)
                                          KarateEmbeddedJavascriptElement(EXPR)
                                            KarateEmbeddedJavascriptElement(LIT_EXPR)
                                              PsiElement(NUMBER)('2000')
                                      PsiElement(R_PAREN)(')')
                                  KarateEmbeddedJavascriptElement(EOS)
                                    PsiElement(SEMI)(';')
                                PsiElement(WS_LF)('\n      ')
                                PsiElement(R_CURLY)('}')
                        PsiElement(WS_LF)('\n      ')
                        KarateEmbeddedJavascriptElement(STATEMENT)
                          KarateEmbeddedJavascriptElement(THROW_STMT)
                            PsiElement(THROW)('throw')
                            PsiElement(WS)(' ')
                            KarateEmbeddedJavascriptElement(EXPR)
                              KarateEmbeddedJavascriptElement(LIT_EXPR)
                                PsiElement(S_STRING)(''API call failed after '')
                              PsiElement(WS)(' ')
                              KarateEmbeddedJavascriptElement(MATH_ADD_EXPR)
                                PsiElement(PLUS)('+')
                                PsiElement(WS)(' ')
                                KarateEmbeddedJavascriptElement(EXPR)
                                  KarateEmbeddedJavascriptElement(REF_EXPR)
                                    PsiElement(IDENT)('maxAttempts')
                              PsiElement(WS)(' ')
                              KarateEmbeddedJavascriptElement(MATH_ADD_EXPR)
                                PsiElement(PLUS)('+')
                                PsiElement(WS)(' ')
                                KarateEmbeddedJavascriptElement(EXPR)
                                  KarateEmbeddedJavascriptElement(LIT_EXPR)
                                    PsiElement(S_STRING)('' attempts'')
                          KarateEmbeddedJavascriptElement(EOS)
                            PsiElement(SEMI)(';')
                        PsiElement(WS_LF)('\n    ')
                        PsiElement(R_CURLY)('}')
      GherkinStep:retryApiCall
        PsiElement(STEP_KEYWORD)('*')
        PsiElement(ACTION_KEYWORD)('def')
        KarateDeclaration(declaration)
          PsiElement(DECLARATION)('result')
        PsiElement(OPERATOR)('=')
        PsiElement(TEXT)('retryApiCall')
        KarateParenElement(paren element)
          PsiElement(OPEN_PAREN)('(')
        PsiElement(CLOSE_PAREN)(')')
      GherkinStep:200
        PsiElement(STEP_KEYWORD)('*')
        PsiElement(ACTION_KEYWORD)('match')
        KarateDeclaration(variable)
          PsiElement(VARIABLE)('result.status')
        PsiElement(OPERATOR)('==')
        PsiElement(TEXT)('200')
    GherkinScenario:
      PsiElement(SCENARIO_KEYWORD)('Scenario:')
      PsiElement(TEXT)('Chain API calls with dependencies')
      GherkinStep:
        PsiElement(STEP_KEYWORD)('Given')
        PsiElement(ACTION_KEYWORD)('url')
        PsiElement(SINGLE_QUOTED_STRING)(''https://api.example.com/resource'')
      GherkinStep:
        PsiElement(STEP_KEYWORD)('And')
        PsiElement(ACTION_KEYWORD)('path')
        PsiElement(SINGLE_QUOTED_STRING)(''create'')
      GherkinStep:
        PsiElement(STEP_KEYWORD)('And')
        PsiElement(ACTION_KEYWORD)('request')
        GherkinPystring
          KarateEmbeddedJsonElement(json_element)
            KarateEmbeddedJsonElement(json_element)
              JsonObject
                PsiElement({)('{')
                JsonProperty
                  JsonStringLiteral
                    PsiElement(DOUBLE_QUOTED_STRING)('"name"')
                  PsiElement(:)(':')
                  JsonStringLiteral
                    PsiElement(DOUBLE_QUOTED_STRING)('"test"')
                PsiElement(,)(',')
                JsonProperty
                  JsonStringLiteral
                    PsiElement(DOUBLE_QUOTED_STRING)('"value"')
                  PsiElement(:)(':')
                  JsonNumberLiteral
                    PsiElement(NUMBER)('123')
                PsiElement(})('}')
      GherkinStep:r
        PsiElement(STEP_KEYWORD)('And')
        PsiElement(TEXT)('r')
        PsiElement(OPERATOR)('=')
        GherkinPystring
          KarateEmbeddedJavascriptElement(javascript_element)
            KarateEmbeddedJavascriptElement(javascript_element)
              KarateEmbeddedJavascriptElement(PROGRAM)
                KarateEmbeddedJavascriptElement(STATEMENT)
                  KarateEmbeddedJavascriptElement(EXPR)
                    KarateEmbeddedJavascriptElement(FN_EXPR)
                      PsiElement(FUNCTION)('function')
                      PsiElement(L_PAREN)('(')
                      KarateEmbeddedJavascriptElement(FN_DECL_ARGS)
                        <empty list>
                      PsiElement(R_PAREN)(')')
                      PsiElement(WS)(' ')
                      KarateEmbeddedJavascriptElement(BLOCK)
                        PsiElement(L_CURLY)('{')
                        PsiElement(WS_LF)('\n      ')
                        KarateEmbeddedJavascriptElement(STATEMENT)
                          KarateEmbeddedJavascriptElement(EXPR)
                            KarateEmbeddedJavascriptElement(REF_EXPR)
                              PsiElement(IDENT)('document')
                            KarateEmbeddedJavascriptElement(REF_DOT_EXPR)
                              PsiElement(DOT)('.')
                              PsiElement(IDENT)('querySelectorAll')
                            KarateEmbeddedJavascriptElement(FN_CALL_EXPR)
                              PsiElement(L_PAREN)('(')
                              KarateEmbeddedJavascriptElement(FN_CALL_ARGS)
                                KarateEmbeddedJavascriptElement(FN_CALL_ARG)
                                  KarateEmbeddedJavascriptElement(EXPR)
                                    KarateEmbeddedJavascriptElement(LIT_EXPR)
                                      PsiElement(S_STRING)(''.ruResponseButtons ._42ft._4jy0._4jy3._4jy1'')
                              PsiElement(R_PAREN)(')')
                          KarateEmbeddedJavascriptElement(EOS)
                            PsiElement(SEMI)(';')
                        PsiElement(WS_LF)('\n      ')
                        KarateEmbeddedJavascriptElement(STATEMENT)
                          KarateEmbeddedJavascriptElement(FOR_STMT)
                            PsiElement(FOR)('for')
                            PsiElement(WS)(' ')
                            PsiElement(L_PAREN)('(')
                            KarateEmbeddedJavascriptElement(EXPR)
                              KarateEmbeddedJavascriptElement(REF_EXPR)
                                PsiElement(IDENT)('i')
                              KarateEmbeddedJavascriptElement(ASSIGN_EXPR)
                                PsiElement(EQ)('=')
                                KarateEmbeddedJavascriptElement(EXPR)
                                  KarateEmbeddedJavascriptElement(LIT_EXPR)
                                    PsiElement(NUMBER)('0')
                            PsiElement(WS)(' ')
                            PsiElement(SEMI)(';')
                            PsiElement(WS)(' ')
                            KarateEmbeddedJavascriptElement(EXPR)
                              KarateEmbeddedJavascriptElement(REF_EXPR)
                                PsiElement(IDENT)('i')
                              KarateEmbeddedJavascriptElement(LOGIC_EXPR)
                                PsiElement(LT)('<')
                                PsiElement(WS)(' ')
                                KarateEmbeddedJavascriptElement(EXPR)
                                  KarateEmbeddedJavascriptElement(REF_EXPR)
                                    PsiElement(IDENT)('r')
                                  KarateEmbeddedJavascriptElement(REF_DOT_EXPR)
                                    PsiElement(DOT)('.')
                                    PsiElement(IDENT)('length')
                            PsiElement(SEMI)(';')
                            PsiElement(WS)(' ')
                            KarateEmbeddedJavascriptElement(EXPR)
                              KarateEmbeddedJavascriptElement(REF_EXPR)
                                PsiElement(IDENT)('i')
                              KarateEmbeddedJavascriptElement(MATH_POST_EXPR)
                                PsiElement(PLUS_PLUS)('++')
                            PsiElement(R_PAREN)(')')
                            KarateEmbeddedJavascriptElement(STATEMENT)
                              KarateEmbeddedJavascriptElement(BLOCK)
                                PsiElement(L_CURLY)('{')
                                PsiElement(WS)('     ')
                                KarateEmbeddedJavascriptElement(STATEMENT)
                                  KarateEmbeddedJavascriptElement(EXPR)
                                    KarateEmbeddedJavascriptElement(REF_EXPR)
                                      PsiElement(IDENT)('r')
                                    KarateEmbeddedJavascriptElement(REF_BRACKET_EXPR)
                                      PsiElement(L_BRACKET)('[')
                                      KarateEmbeddedJavascriptElement(EXPR)
                                        KarateEmbeddedJavascriptElement(REF_EXPR)
                                          PsiElement(IDENT)('i')
                                      PsiElement(R_BRACKET)(']')
                                    KarateEmbeddedJavascriptElement(REF_DOT_EXPR)
                                      PsiElement(DOT)('.')
                                      PsiElement(IDENT)('click')
                                    KarateEmbeddedJavascriptElement(FN_CALL_EXPR)
                                      PsiElement(L_PAREN)('(')
                                      KarateEmbeddedJavascriptElement(FN_CALL_ARGS)
                                        <empty list>
                                      PsiElement(R_PAREN)(')')
                                  KarateEmbeddedJavascriptElement(EOS)
                                    PsiElement(SEMI)(';')
                                PsiElement(WS)('     ')
                                PsiElement(R_CURLY)('}')
                        PsiElement(R_CURLY)('}')
      GherkinStep:POST
        PsiElement(STEP_KEYWORD)('When')
        PsiElement(ACTION_KEYWORD)('method')
        PsiElement(TEXT)('POST')
      GherkinStep:201
        PsiElement(STEP_KEYWORD)('Then')
        PsiElement(ACTION_KEYWORD)('status')
        PsiElement(TEXT)('201')
      GherkinStep:.id
        PsiElement(STEP_KEYWORD)('And')
        PsiElement(ACTION_KEYWORD)('def')
        KarateDeclaration(declaration)
          PsiElement(DECLARATION)('resourceId')
        PsiElement(OPERATOR)('=')
        PsiElement(ACTION_KEYWORD)('response')
        PsiElement(TEXT)('.id')
      GherkinStep:
        PsiElement(STEP_KEYWORD)('Given')
        PsiElement(ACTION_KEYWORD)('url')
        PsiElement(SINGLE_QUOTED_STRING)(''https://api.example.com/resource'')
      GherkinStep:resourceId
        PsiElement(STEP_KEYWORD)('And')
        PsiElement(ACTION_KEYWORD)('path')
        PsiElement(TEXT)('resourceId')
      GherkinStep:GET
        PsiElement(STEP_KEYWORD)('When')
        PsiElement(ACTION_KEYWORD)('method')
        PsiElement(TEXT)('GET')
      GherkinStep:200
        PsiElement(STEP_KEYWORD)('Then')
        PsiElement(ACTION_KEYWORD)('status')
        PsiElement(TEXT)('200')
      GherkinStep:
        PsiElement(STEP_KEYWORD)('And')
        PsiElement(ACTION_KEYWORD)('match')
        KarateDeclaration(variable)
          PsiElement(VARIABLE)('response.name')
        PsiElement(OPERATOR)('==')
        PsiElement(SINGLE_QUOTED_STRING)(''test'')
      GherkinStep:
        PsiElement(STEP_KEYWORD)('Given')
        PsiElement(ACTION_KEYWORD)('url')
        PsiElement(SINGLE_QUOTED_STRING)(''https://api.example.com/resource'')
      GherkinStep:resourceId
        PsiElement(STEP_KEYWORD)('And')
        PsiElement(ACTION_KEYWORD)('path')
        PsiElement(TEXT)('resourceId')
      GherkinStep:DELETE
        PsiElement(STEP_KEYWORD)('When')
        PsiElement(ACTION_KEYWORD)('method')
        PsiElement(TEXT)('DELETE')
      GherkinStep:204
        PsiElement(STEP_KEYWORD)('Then')
        PsiElement(ACTION_KEYWORD)('status')
        PsiElement(TEXT)('204')
    GherkinScenario:
      PsiElement(SCENARIO_KEYWORD)('Scenario:')
      PsiElement(TEXT)('Perform nested operations on a JSON structure')
      GherkinStep:
        PsiElement(STEP_KEYWORD)('*')
        PsiElement(ACTION_KEYWORD)('def')
        KarateDeclaration(declaration)
          PsiElement(DECLARATION)('data')
        PsiElement(OPERATOR)('=')
        GherkinPystring
          KarateEmbeddedJsonElement(json_element)
            KarateEmbeddedJsonElement(json_element)
              JsonObject
                PsiElement({)('{')
                JsonProperty
                  JsonStringLiteral
                    PsiElement(DOUBLE_QUOTED_STRING)('"users"')
                  PsiElement(:)(':')
                  JsonArray
                    PsiElement([)('[')
                    JsonObject
                      PsiElement({)('{')
                      JsonProperty
                        JsonStringLiteral
                          PsiElement(DOUBLE_QUOTED_STRING)('"id"')
                        PsiElement(:)(':')
                        JsonNumberLiteral
                          PsiElement(NUMBER)('1')
                      PsiElement(,)(',')
                      JsonProperty
                        JsonStringLiteral
                          PsiElement(DOUBLE_QUOTED_STRING)('"name"')
                        PsiElement(:)(':')
                        JsonStringLiteral
                          PsiElement(DOUBLE_QUOTED_STRING)('"Alice"')
                      PsiElement(})('}')
                    PsiElement(,)(',')
                    JsonObject
                      PsiElement({)('{')
                      JsonProperty
                        JsonStringLiteral
                          PsiElement(DOUBLE_QUOTED_STRING)('"id"')
                        PsiElement(:)(':')
                        JsonNumberLiteral
                          PsiElement(NUMBER)('2')
                      PsiElement(,)(',')
                      JsonProperty
                        JsonStringLiteral
                          PsiElement(DOUBLE_QUOTED_STRING)('"name"')
                        PsiElement(:)(':')
                        JsonStringLiteral
                          PsiElement(DOUBLE_QUOTED_STRING)('"Bob"')
                      PsiElement(})('}')
                    PsiElement(])(']')
                PsiElement(})('}')
      GherkinStep:
        PsiElement(STEP_KEYWORD)('*')
        PsiElement(ACTION_KEYWORD)('def')
        KarateDeclaration(declaration)
          PsiElement(DECLARATION)('transformData')
        PsiElement(OPERATOR)('=')
        GherkinPystring
          KarateEmbeddedJavascriptElement(javascript_element)
            KarateEmbeddedJavascriptElement(javascript_element)
              KarateEmbeddedJavascriptElement(PROGRAM)
                KarateEmbeddedJavascriptElement(STATEMENT)
                  KarateEmbeddedJavascriptElement(EXPR)
                    KarateEmbeddedJavascriptElement(FN_EXPR)
                      PsiElement(FUNCTION)('function')
                      PsiElement(L_PAREN)('(')
                      KarateEmbeddedJavascriptElement(FN_DECL_ARGS)
                        KarateEmbeddedJavascriptElement(FN_DECL_ARG)
                          PsiElement(IDENT)('input')
                      PsiElement(R_PAREN)(')')
                      PsiElement(WS)(' ')
                      KarateEmbeddedJavascriptElement(BLOCK)
                        PsiElement(L_CURLY)('{')
                        PsiElement(WS_LF)('\n      ')
                        KarateEmbeddedJavascriptElement(STATEMENT)
                          KarateEmbeddedJavascriptElement(VAR_STMT)
                            PsiElement(VAR)('var')
                            PsiElement(WS)(' ')
                            KarateEmbeddedJavascriptElement(VAR_STMT_NAMES)
                              PsiElement(IDENT)('output')
                            PsiElement(WS)(' ')
                            PsiElement(EQ)('=')
                            PsiElement(WS)(' ')
                            KarateEmbeddedJavascriptElement(EXPR)
                              KarateEmbeddedJavascriptElement(LIT_EXPR)
                                KarateEmbeddedJavascriptElement(LIT_ARRAY)
                                  PsiElement(L_BRACKET)('[')
                                  PsiElement(R_BRACKET)(']')
                          KarateEmbeddedJavascriptElement(EOS)
                            PsiElement(SEMI)(';')
                        PsiElement(WS_LF)('\n      ')
                        KarateEmbeddedJavascriptElement(STATEMENT)
                          KarateEmbeddedJavascriptElement(EXPR)
                            KarateEmbeddedJavascriptElement(REF_EXPR)
                              PsiElement(IDENT)('input')
                            KarateEmbeddedJavascriptElement(REF_DOT_EXPR)
                              PsiElement(DOT)('.')
                              PsiElement(IDENT)('users')
                            KarateEmbeddedJavascriptElement(REF_DOT_EXPR)
                              PsiElement(DOT)('.')
                              PsiElement(IDENT)('forEach')
                            KarateEmbeddedJavascriptElement(FN_CALL_EXPR)
                              PsiElement(L_PAREN)('(')
                              KarateEmbeddedJavascriptElement(FN_CALL_ARGS)
                                KarateEmbeddedJavascriptElement(FN_CALL_ARG)
                                  KarateEmbeddedJavascriptElement(EXPR)
                                    KarateEmbeddedJavascriptElement(FN_EXPR)
                                      PsiElement(FUNCTION)('function')
                                      PsiElement(L_PAREN)('(')
                                      KarateEmbeddedJavascriptElement(FN_DECL_ARGS)
                                        KarateEmbeddedJavascriptElement(FN_DECL_ARG)
                                          PsiElement(IDENT)('user')
                                      PsiElement(R_PAREN)(')')
                                      PsiElement(WS)(' ')
                                      KarateEmbeddedJavascriptElement(BLOCK)
                                        PsiElement(L_CURLY)('{')
                                        PsiElement(WS_LF)('\n        ')
                                        KarateEmbeddedJavascriptElement(STATEMENT)
                                          KarateEmbeddedJavascriptElement(VAR_STMT)
                                            PsiElement(VAR)('var')
                                            PsiElement(WS)(' ')
                                            KarateEmbeddedJavascriptElement(VAR_STMT_NAMES)
                                              PsiElement(IDENT)('transformed')
                                            PsiElement(WS)(' ')
                                            PsiElement(EQ)('=')
                                            PsiElement(WS)(' ')
                                            KarateEmbeddedJavascriptElement(EXPR)
                                              KarateEmbeddedJavascriptElement(LIT_EXPR)
                                                KarateEmbeddedJavascriptElement(LIT_OBJECT)
                                                  PsiElement(L_CURLY)('{')
                                                  PsiElement(WS)(' ')
                                                  KarateEmbeddedJavascriptElement(OBJECT_ELEM)
                                                    PsiElement(IDENT)('userId')
                                                    PsiElement(COLON)(':')
                                                    PsiElement(WS)(' ')
                                                    KarateEmbeddedJavascriptElement(EXPR)
                                                      KarateEmbeddedJavascriptElement(REF_EXPR)
                                                        PsiElement(IDENT)('user')
                                                      KarateEmbeddedJavascriptElement(REF_DOT_EXPR)
                                                        PsiElement(DOT)('.')
                                                        PsiElement(IDENT)('id')
                                                    PsiElement(COMMA)(',')
                                                  PsiElement(WS)(' ')
                                                  KarateEmbeddedJavascriptElement(OBJECT_ELEM)
                                                    PsiElement(IDENT)('details')
                                                    PsiElement(COLON)(':')
                                                    PsiElement(WS)(' ')
                                                    KarateEmbeddedJavascriptElement(EXPR)
                                                      KarateEmbeddedJavascriptElement(LIT_EXPR)
                                                        KarateEmbeddedJavascriptElement(LIT_ARRAY)
                                                          PsiElement(L_BRACKET)('[')
                                                          PsiElement(R_BRACKET)(']')
                                                  PsiElement(WS)(' ')
                                                  PsiElement(R_CURLY)('}')
                                          KarateEmbeddedJavascriptElement(EOS)
                                            PsiElement(SEMI)(';')
                                        PsiElement(WS_LF)('\n        ')
                                        KarateEmbeddedJavascriptElement(STATEMENT)
                                          KarateEmbeddedJavascriptElement(FOR_STMT)
                                            PsiElement(FOR)('for')
                                            PsiElement(WS)(' ')
                                            PsiElement(L_PAREN)('(')
                                            KarateEmbeddedJavascriptElement(VAR_STMT)
                                              PsiElement(VAR)('var')
                                              PsiElement(WS)(' ')
                                              KarateEmbeddedJavascriptElement(VAR_STMT_NAMES)
                                                PsiElement(IDENT)('i')
                                              PsiElement(WS)(' ')
                                              PsiElement(EQ)('=')
                                              PsiElement(WS)(' ')
                                              KarateEmbeddedJavascriptElement(EXPR)
                                                KarateEmbeddedJavascriptElement(LIT_EXPR)
                                                  PsiElement(NUMBER)('1')
                                            PsiElement(SEMI)(';')
                                            PsiElement(WS)(' ')
                                            KarateEmbeddedJavascriptElement(EXPR)
                                              KarateEmbeddedJavascriptElement(REF_EXPR)
                                                PsiElement(IDENT)('i')
                                              PsiElement(WS)(' ')
                                              KarateEmbeddedJavascriptElement(LOGIC_EXPR)
                                                PsiElement(LT_EQ)('<=')
                                                PsiElement(WS)(' ')
                                                KarateEmbeddedJavascriptElement(EXPR)
                                                  KarateEmbeddedJavascriptElement(LIT_EXPR)
                                                    PsiElement(NUMBER)('3')
                                            PsiElement(SEMI)(';')
                                            PsiElement(WS)(' ')
                                            KarateEmbeddedJavascriptElement(EXPR)
                                              KarateEmbeddedJavascriptElement(REF_EXPR)
                                                PsiElement(IDENT)('i')
                                              KarateEmbeddedJavascriptElement(MATH_POST_EXPR)
                                                PsiElement(PLUS_PLUS)('++')
                                            PsiElement(R_PAREN)(')')
                                            PsiElement(WS)(' ')
                                            KarateEmbeddedJavascriptElement(STATEMENT)
                                              KarateEmbeddedJavascriptElement(BLOCK)
                                                PsiElement(L_CURLY)('{')
                                                PsiElement(WS_LF)('\n          ')
                                                KarateEmbeddedJavascriptElement(STATEMENT)
                                                  KarateEmbeddedJavascriptElement(EXPR)
                                                    KarateEmbeddedJavascriptElement(REF_EXPR)
                                                      PsiElement(IDENT)('transformed')
                                                    KarateEmbeddedJavascriptElement(REF_DOT_EXPR)
                                                      PsiElement(DOT)('.')
                                                      PsiElement(IDENT)('details')
                                                    KarateEmbeddedJavascriptElement(REF_DOT_EXPR)
                                                      PsiElement(DOT)('.')
                                                      PsiElement(IDENT)('push')
                                                    KarateEmbeddedJavascriptElement(FN_CALL_EXPR)
                                                      PsiElement(L_PAREN)('(')
                                                      KarateEmbeddedJavascriptElement(FN_CALL_ARGS)
                                                        KarateEmbeddedJavascriptElement(FN_CALL_ARG)
                                                          KarateEmbeddedJavascriptElement(EXPR)
                                                            KarateEmbeddedJavascriptElement(LIT_EXPR)
                                                              KarateEmbeddedJavascriptElement(LIT_OBJECT)
                                                                PsiElement(L_CURLY)('{')
                                                                PsiElement(WS)(' ')
                                                                KarateEmbeddedJavascriptElement(OBJECT_ELEM)
                                                                  PsiElement(IDENT)('detailId')
                                                                  PsiElement(COLON)(':')
                                                                  PsiElement(WS)(' ')
                                                                  KarateEmbeddedJavascriptElement(EXPR)
                                                                    KarateEmbeddedJavascriptElement(REF_EXPR)
                                                                      PsiElement(IDENT)('i')
                                                                  PsiElement(COMMA)(',')
                                                                PsiElement(WS)(' ')
                                                                KarateEmbeddedJavascriptElement(OBJECT_ELEM)
                                                                  PsiElement(IDENT)('info')
                                                                  PsiElement(COLON)(':')
                                                                  PsiElement(WS)(' ')
                                                                  KarateEmbeddedJavascriptElement(EXPR)
                                                                    KarateEmbeddedJavascriptElement(REF_EXPR)
                                                                      PsiElement(IDENT)('user')
                                                                    KarateEmbeddedJavascriptElement(REF_DOT_EXPR)
                                                                      PsiElement(DOT)('.')
                                                                      PsiElement(IDENT)('name')
                                                                    PsiElement(WS)(' ')
                                                                    KarateEmbeddedJavascriptElement(MATH_ADD_EXPR)
                                                                      PsiElement(PLUS)('+')
                                                                      PsiElement(WS)(' ')
                                                                      KarateEmbeddedJavascriptElement(EXPR)
                                                                        KarateEmbeddedJavascriptElement(LIT_EXPR)
                                                                          PsiElement(S_STRING)(''_info'')
                                                                    PsiElement(WS)(' ')
                                                                    KarateEmbeddedJavascriptElement(MATH_ADD_EXPR)
                                                                      PsiElement(PLUS)('+')
                                                                      PsiElement(WS)(' ')
                                                                      KarateEmbeddedJavascriptElement(EXPR)
                                                                        KarateEmbeddedJavascriptElement(REF_EXPR)
                                                                          PsiElement(IDENT)('i')
                                                                PsiElement(WS)(' ')
                                                                PsiElement(R_CURLY)('}')
                                                      PsiElement(R_PAREN)(')')
                                                  KarateEmbeddedJavascriptElement(EOS)
                                                    PsiElement(SEMI)(';')
                                                PsiElement(WS_LF)('\n        ')
                                                PsiElement(R_CURLY)('}')
                                        PsiElement(WS_LF)('\n        ')
                                        KarateEmbeddedJavascriptElement(STATEMENT)
                                          KarateEmbeddedJavascriptElement(EXPR)
                                            KarateEmbeddedJavascriptElement(REF_EXPR)
                                              PsiElement(IDENT)('output')
                                            KarateEmbeddedJavascriptElement(REF_DOT_EXPR)
                                              PsiElement(DOT)('.')
                                              PsiElement(IDENT)('push')
                                            KarateEmbeddedJavascriptElement(FN_CALL_EXPR)
                                              PsiElement(L_PAREN)('(')
                                              KarateEmbeddedJavascriptElement(FN_CALL_ARGS)
                                                KarateEmbeddedJavascriptElement(FN_CALL_ARG)
                                                  KarateEmbeddedJavascriptElement(EXPR)
                                                    KarateEmbeddedJavascriptElement(REF_EXPR)
                                                      PsiElement(IDENT)('transformed')
                                              PsiElement(R_PAREN)(')')
                                          KarateEmbeddedJavascriptElement(EOS)
                                            PsiElement(SEMI)(';')
                                        PsiElement(WS_LF)('\n      ')
                                        PsiElement(R_CURLY)('}')
                              PsiElement(R_PAREN)(')')
                          KarateEmbeddedJavascriptElement(EOS)
                            PsiElement(SEMI)(';')
                        PsiElement(WS_LF)('\n      ')
                        KarateEmbeddedJavascriptElement(STATEMENT)
                          KarateEmbeddedJavascriptElement(RETURN_STMT)
                            PsiElement(RETURN)('return')
                            PsiElement(WS)(' ')
                            KarateEmbeddedJavascriptElement(EXPR)
                              KarateEmbeddedJavascriptElement(REF_EXPR)
                                PsiElement(IDENT)('output')
                          KarateEmbeddedJavascriptElement(EOS)
                            PsiElement(SEMI)(';')
                        PsiElement(WS_LF)('\n    ')
                        PsiElement(R_CURLY)('}')
      GherkinStep:transformData
        PsiElement(STEP_KEYWORD)('*')
        PsiElement(ACTION_KEYWORD)('def')
        KarateDeclaration(declaration)
          PsiElement(DECLARATION)('result')
        PsiElement(OPERATOR)('=')
        PsiElement(TEXT)('transformData')
        KarateParenElement(paren element)
          PsiElement(OPEN_PAREN)('(')
          PsiElement(TEXT)('data')
        PsiElement(CLOSE_PAREN)(')')
      GherkinStep:, result
        PsiElement(STEP_KEYWORD)('*')
        PsiElement(ACTION_KEYWORD)('print')
        PsiElement(SINGLE_QUOTED_STRING)(''Transformed Data:'')
        PsiElement(TEXT)(',')
        PsiElement(TEXT)('result')
      GherkinStep:
        PsiElement(STEP_KEYWORD)('*')
        PsiElement(ACTION_KEYWORD)('match')
        KarateDeclaration(variable)
          PsiElement(VARIABLE)('result')
        PsiElement(OPERATOR)('==')
        GherkinPystring
          KarateEmbeddedJsonElement(json_element)
            KarateEmbeddedJsonElement(json_element)
              JsonArray
                PsiElement([)('[')
                JsonObject
                  PsiElement({)('{')
                  JsonProperty
                    JsonReferenceExpression
                      PsiElement(IDENTIFIER)('userId')
                    PsiElement(:)(':')
                    JsonNumberLiteral
                      PsiElement(NUMBER)('1')
                  PsiElement(,)(',')
                  JsonProperty
                    JsonReferenceExpression
                      PsiElement(IDENTIFIER)('details')
                    PsiElement(:)(':')
                    JsonArray
                      PsiElement([)('[')
                      JsonObject
                        PsiElement({)('{')
                        JsonProperty
                          JsonReferenceExpression
                            PsiElement(IDENTIFIER)('detailId')
                          PsiElement(:)(':')
                          JsonNumberLiteral
                            PsiElement(NUMBER)('1')
                        PsiElement(,)(',')
                        JsonProperty
                          JsonReferenceExpression
                            PsiElement(IDENTIFIER)('info')
                          PsiElement(:)(':')
                          JsonStringLiteral
                            PsiElement(SINGLE_QUOTED_STRING)(''Alice_info1'')
                        PsiElement(})('}')
                      PsiElement(,)(',')
                      JsonObject
                        PsiElement({)('{')
                        JsonProperty
                          JsonReferenceExpression
                            PsiElement(IDENTIFIER)('detailId')
                          PsiElement(:)(':')
                          JsonNumberLiteral
                            PsiElement(NUMBER)('2')
                        PsiElement(,)(',')
                        JsonProperty
                          JsonReferenceExpression
                            PsiElement(IDENTIFIER)('info')
                          PsiElement(:)(':')
                          JsonStringLiteral
                            PsiElement(SINGLE_QUOTED_STRING)(''Alice_info2'')
                        PsiElement(})('}')
                      PsiElement(,)(',')
                      JsonObject
                        PsiElement({)('{')
                        JsonProperty
                          JsonReferenceExpression
                            PsiElement(IDENTIFIER)('detailId')
                          PsiElement(:)(':')
                          JsonNumberLiteral
                            PsiElement(NUMBER)('3')
                        PsiElement(,)(',')
                        JsonProperty
                          JsonReferenceExpression
                            PsiElement(IDENTIFIER)('info')
                          PsiElement(:)(':')
                          JsonStringLiteral
                            PsiElement(SINGLE_QUOTED_STRING)(''Alice_info3'')
                        PsiElement(})('}')
                      PsiElement(])(']')
                  PsiElement(})('}')
                PsiElement(,)(',')
                JsonObject
                  PsiElement({)('{')
                  JsonProperty
                    JsonReferenceExpression
                      PsiElement(IDENTIFIER)('userId')
                    PsiElement(:)(':')
                    JsonNumberLiteral
                      PsiElement(NUMBER)('2')
                  PsiElement(,)(',')
                  JsonProperty
                    JsonReferenceExpression
                      PsiElement(IDENTIFIER)('details')
                    PsiElement(:)(':')
                    JsonArray
                      PsiElement([)('[')
                      JsonObject
                        PsiElement({)('{')
                        JsonProperty
                          JsonReferenceExpression
                            PsiElement(IDENTIFIER)('detailId')
                          PsiElement(:)(':')
                          JsonNumberLiteral
                            PsiElement(NUMBER)('1')
                        PsiElement(,)(',')
                        JsonProperty
                          JsonReferenceExpression
                            PsiElement(IDENTIFIER)('info')
                          PsiElement(:)(':')
                          JsonStringLiteral
                            PsiElement(SINGLE_QUOTED_STRING)(''Bob_info1'')
                        PsiElement(})('}')
                      PsiElement(,)(',')
                      JsonObject
                        PsiElement({)('{')
                        JsonProperty
                          JsonReferenceExpression
                            PsiElement(IDENTIFIER)('detailId')
                          PsiElement(:)(':')
                          JsonNumberLiteral
                            PsiElement(NUMBER)('2')
                        PsiElement(,)(',')
                        JsonProperty
                          JsonReferenceExpression
                            PsiElement(IDENTIFIER)('info')
                          PsiElement(:)(':')
                          JsonStringLiteral
                            PsiElement(SINGLE_QUOTED_STRING)(''Bob_info2'')
                        PsiElement(})('}')
                      PsiElement(,)(',')
                      JsonObject
                        PsiElement({)('{')
                        JsonProperty
                          JsonReferenceExpression
                            PsiElement(IDENTIFIER)('detailId')
                          PsiElement(:)(':')
                          JsonNumberLiteral
                            PsiElement(NUMBER)('3')
                        PsiElement(,)(',')
                        JsonProperty
                          JsonReferenceExpression
                            PsiElement(IDENTIFIER)('info')
                          PsiElement(:)(':')
                          JsonStringLiteral
                            PsiElement(SINGLE_QUOTED_STRING)(''Bob_info3'')
                        PsiElement(})('}')
                      PsiElement(])(']')
                  PsiElement(})('}')
                PsiElement(])(']')
    GherkinScenario:
      PsiElement(SCENARIO_KEYWORD)('Scenario:')
      PsiElement(TEXT)('Parallel processing of API requests')
      GherkinStep:
        PsiElement(STEP_KEYWORD)('*')
        PsiElement(ACTION_KEYWORD)('def')
        KarateDeclaration(declaration)
          PsiElement(DECLARATION)('makeRequest')
        PsiElement(OPERATOR)('=')
        GherkinPystring
          KarateEmbeddedJavascriptElement(javascript_element)
            KarateEmbeddedJavascriptElement(javascript_element)
              KarateEmbeddedJavascriptElement(PROGRAM)
                KarateEmbeddedJavascriptElement(STATEMENT)
                  KarateEmbeddedJavascriptElement(EXPR)
                    KarateEmbeddedJavascriptElement(FN_EXPR)
                      PsiElement(FUNCTION)('function')
                      PsiElement(L_PAREN)('(')
                      KarateEmbeddedJavascriptElement(FN_DECL_ARGS)
                        KarateEmbeddedJavascriptElement(FN_DECL_ARG)
                          PsiElement(IDENT)('id')
                      PsiElement(R_PAREN)(')')
                      PsiElement(WS)(' ')
                      KarateEmbeddedJavascriptElement(BLOCK)
                        PsiElement(L_CURLY)('{')
                        PsiElement(WS_LF)('\n      ')
                        KarateEmbeddedJavascriptElement(STATEMENT)
                          KarateEmbeddedJavascriptElement(RETURN_STMT)
                            PsiElement(RETURN)('return')
                            PsiElement(WS)(' ')
                            KarateEmbeddedJavascriptElement(EXPR)
                              KarateEmbeddedJavascriptElement(REF_EXPR)
                                PsiElement(IDENT)('karate')
                              KarateEmbeddedJavascriptElement(REF_DOT_EXPR)
                                PsiElement(DOT)('.')
                                PsiElement(IDENT)('call')
                              KarateEmbeddedJavascriptElement(FN_CALL_EXPR)
                                PsiElement(L_PAREN)('(')
                                KarateEmbeddedJavascriptElement(FN_CALL_ARGS)
                                  KarateEmbeddedJavascriptElement(FN_CALL_ARG)
                                    KarateEmbeddedJavascriptElement(EXPR)
                                      KarateEmbeddedJavascriptElement(LIT_EXPR)
                                        PsiElement(S_STRING)(''singleRequest.feature'')
                                    PsiElement(COMMA)(',')
                                  PsiElement(WS)(' ')
                                  KarateEmbeddedJavascriptElement(FN_CALL_ARG)
                                    KarateEmbeddedJavascriptElement(EXPR)
                                      KarateEmbeddedJavascriptElement(LIT_EXPR)
                                        KarateEmbeddedJavascriptElement(LIT_OBJECT)
                                          PsiElement(L_CURLY)('{')
                                          KarateEmbeddedJavascriptElement(OBJECT_ELEM)
                                            PsiElement(IDENT)('id')
                                            PsiElement(COLON)(':')
                                            PsiElement(WS)(' ')
                                            KarateEmbeddedJavascriptElement(EXPR)
                                              KarateEmbeddedJavascriptElement(REF_EXPR)
                                                PsiElement(IDENT)('id')
                                          PsiElement(R_CURLY)('}')
                                PsiElement(R_PAREN)(')')
                          KarateEmbeddedJavascriptElement(EOS)
                            PsiElement(SEMI)(';')
                        PsiElement(WS_LF)('\n    ')
                        PsiElement(R_CURLY)('}')
      GherkinStep:
        PsiElement(STEP_KEYWORD)('*')
        PsiElement(ACTION_KEYWORD)('def')
        KarateDeclaration(declaration)
          PsiElement(DECLARATION)('ids')
        PsiElement(OPERATOR)('=')
        GherkinPystring
          KarateEmbeddedJsonElement(json_element)
            KarateEmbeddedJsonElement(json_element)
              JsonArray
                PsiElement([)('[')
                JsonNumberLiteral
                  PsiElement(NUMBER)('1')
                PsiElement(,)(',')
                JsonNumberLiteral
                  PsiElement(NUMBER)('2')
                PsiElement(,)(',')
                JsonNumberLiteral
                  PsiElement(NUMBER)('3')
                PsiElement(,)(',')
                JsonNumberLiteral
                  PsiElement(NUMBER)('4')
                PsiElement(,)(',')
                JsonNumberLiteral
                  PsiElement(NUMBER)('5')
                PsiElement(])(']')
      GherkinStep:karate.parallel
        PsiElement(STEP_KEYWORD)('*')
        PsiElement(ACTION_KEYWORD)('def')
        KarateDeclaration(declaration)
          PsiElement(DECLARATION)('results')
        PsiElement(OPERATOR)('=')
        PsiElement(TEXT)('karate.parallel')
        KarateParenElement(paren element)
          PsiElement(OPEN_PAREN)('(')
          PsiElement(TEXT)('ids,')
          PsiElement(TEXT)('makeRequest')
        PsiElement(CLOSE_PAREN)(')')
      GherkinStep:5
        PsiElement(STEP_KEYWORD)('*')
        PsiElement(ACTION_KEYWORD)('match')
        KarateDeclaration(variable)
          PsiElement(VARIABLE)('results.length')
        PsiElement(OPERATOR)('==')
        PsiElement(TEXT)('5')
    GherkinScenario:
      PsiElement(SCENARIO_KEYWORD)('Scenario:')
      PsiElement(TEXT)('Combine Karate DSL with embedded JavaScript')
      GherkinStep:23
        PsiElement(STEP_KEYWORD)('*')
        PsiElement(ACTION_KEYWORD)('def')
        KarateDeclaration(declaration)
          PsiElement(DECLARATION)('id')
        PsiElement(OPERATOR)('=')
        PsiElement(TEXT)('23')
      GherkinStep:
        PsiElement(STEP_KEYWORD)('*')
        PsiElement(ACTION_KEYWORD)('def')
        KarateDeclaration(declaration)
          PsiElement(DECLARATION)('data')
        PsiElement(OPERATOR)('=')
        GherkinPystring
          KarateEmbeddedJsonElement(json_element)
            KarateEmbeddedJsonElement(json_element)
              JsonArray
                PsiElement([)('[')
                JsonObject
                  PsiElement({)('{')
                  JsonProperty
                    JsonReferenceExpression
                      PsiElement(IDENTIFIER)('id')
                    PsiElement(:)(':')
                    JsonNumberLiteral
                      PsiElement(NUMBER)('1')
                  PsiElement(,)(',')
                  JsonProperty
                    JsonReferenceExpression
                      PsiElement(IDENTIFIER)('name')
                    PsiElement(:)(':')
                    JsonStringLiteral
                      PsiElement(SINGLE_QUOTED_STRING)(''A'')
                  PsiElement(})('}')
                PsiElement(,)(',')
                JsonObject
                  PsiElement({)('{')
                  JsonProperty
                    JsonReferenceExpression
                      PsiElement(IDENTIFIER)('id')
                    PsiElement(:)(':')
                    JsonNumberLiteral
                      PsiElement(NUMBER)('2')
                  PsiElement(,)(',')
                  JsonProperty
                    JsonReferenceExpression
                      PsiElement(IDENTIFIER)('name')
                    PsiElement(:)(':')
                    JsonStringLiteral
                      PsiElement(SINGLE_QUOTED_STRING)(''B'')
                  PsiElement(})('}')
                PsiElement(])(']')
      GherkinStep:karate.filter
        PsiElement(STEP_KEYWORD)('*')
        PsiElement(ACTION_KEYWORD)('def')
        KarateDeclaration(declaration)
          PsiElement(DECLARATION)('results')
        PsiElement(OPERATOR)('=')
        PsiElement(TEXT)('karate.filter')
        KarateParenElement(paren element)
          PsiElement(OPEN_PAREN)('(')
          PsiElement(TEXT)('data,')
          GherkinPystring
            KarateEmbeddedJavascriptElement(javascript_element)
              KarateEmbeddedJavascriptElement(javascript_element)
                KarateEmbeddedJavascriptElement(PROGRAM)
                  KarateEmbeddedJavascriptElement(STATEMENT)
                    KarateEmbeddedJavascriptElement(EXPR)
                      KarateEmbeddedJavascriptElement(FN_EXPR)
                        PsiElement(FUNCTION)('function')
                        PsiElement(WS)(' ')
                        PsiElement(L_PAREN)('(')
                        KarateEmbeddedJavascriptElement(FN_DECL_ARGS)
                          KarateEmbeddedJavascriptElement(FN_DECL_ARG)
                            PsiElement(IDENT)('x')
                        PsiElement(R_PAREN)(')')
                        PsiElement(WS)(' ')
                        KarateEmbeddedJavascriptElement(BLOCK)
                          PsiElement(L_CURLY)('{')
                          PsiElement(WS)(' ')
                          KarateEmbeddedJavascriptElement(STATEMENT)
                            KarateEmbeddedJavascriptElement(RETURN_STMT)
                              PsiElement(RETURN)('return')
                              PsiElement(WS)(' ')
                              KarateEmbeddedJavascriptElement(EXPR)
                                KarateEmbeddedJavascriptElement(REF_EXPR)
                                  PsiElement(IDENT)('x')
                                KarateEmbeddedJavascriptElement(REF_DOT_EXPR)
                                  PsiElement(DOT)('.')
                                  PsiElement(IDENT)('id')
                                PsiElement(WS)(' ')
                                KarateEmbeddedJavascriptElement(LOGIC_EXPR)
                                  PsiElement(GT)('>')
                                  PsiElement(WS)(' ')
                                  KarateEmbeddedJavascriptElement(EXPR)
                                    KarateEmbeddedJavascriptElement(LIT_EXPR)
                                      PsiElement(NUMBER)('1')
                            KarateEmbeddedJavascriptElement(EOS)
                              PsiElement(SEMI)(';')
                          PsiElement(WS)(' ')
                          PsiElement(R_CURLY)('}')
        PsiElement(CLOSE_PAREN)(')')
      GherkinStep:
        PsiElement(STEP_KEYWORD)('*')
        PsiElement(ACTION_KEYWORD)('match')
        KarateDeclaration(variable)
          PsiElement(VARIABLE)('results')
        PsiElement(OPERATOR)('==')
        GherkinPystring
          KarateEmbeddedJsonElement(json_element)
            KarateEmbeddedJsonElement(json_element)
              JsonArray
                PsiElement([)('[')
                JsonObject
                  PsiElement({)('{')
                  JsonProperty
                    JsonReferenceExpression
                      PsiElement(IDENTIFIER)('id')
                    PsiElement(:)(':')
                    JsonNumberLiteral
                      PsiElement(NUMBER)('2')
                  PsiElement(,)(',')
                  JsonProperty
                    JsonReferenceExpression
                      PsiElement(IDENTIFIER)('name')
                    PsiElement(:)(':')
                    JsonStringLiteral
                      PsiElement(SINGLE_QUOTED_STRING)(''B'')
                  PsiElement(})('}')
                PsiElement(])(']')
      GherkinStep:
        PsiElement(STEP_KEYWORD)('*')
        PsiElement(ACTION_KEYWORD)('def')
        KarateDeclaration(declaration)
          PsiElement(DECLARATION)('calculateSum')
        PsiElement(OPERATOR)('=')
        GherkinPystring
          KarateEmbeddedJavascriptElement(javascript_element)
            KarateEmbeddedJavascriptElement(javascript_element)
              KarateEmbeddedJavascriptElement(PROGRAM)
                KarateEmbeddedJavascriptElement(STATEMENT)
                  KarateEmbeddedJavascriptElement(EXPR)
                    KarateEmbeddedJavascriptElement(FN_EXPR)
                      PsiElement(FUNCTION)('function')
                      PsiElement(L_PAREN)('(')
                      KarateEmbeddedJavascriptElement(FN_DECL_ARGS)
                        KarateEmbeddedJavascriptElement(FN_DECL_ARG)
                          PsiElement(IDENT)('a')
                          PsiElement(COMMA)(',')
                        PsiElement(WS)(' ')
                        KarateEmbeddedJavascriptElement(FN_DECL_ARG)
                          PsiElement(IDENT)('b')
                      PsiElement(R_PAREN)(')')
                      PsiElement(WS)(' ')
                      KarateEmbeddedJavascriptElement(BLOCK)
                        PsiElement(L_CURLY)('{')
                        PsiElement(WS_LF)('\n      ')
                        KarateEmbeddedJavascriptElement(STATEMENT)
                          KarateEmbeddedJavascriptElement(RETURN_STMT)
                            PsiElement(RETURN)('return')
                            PsiElement(WS)(' ')
                            KarateEmbeddedJavascriptElement(EXPR)
                              KarateEmbeddedJavascriptElement(REF_EXPR)
                                PsiElement(IDENT)('a')
                              PsiElement(WS)(' ')
                              KarateEmbeddedJavascriptElement(MATH_ADD_EXPR)
                                PsiElement(PLUS)('+')
                                PsiElement(WS)(' ')
                                KarateEmbeddedJavascriptElement(EXPR)
                                  KarateEmbeddedJavascriptElement(REF_EXPR)
                                    PsiElement(IDENT)('b')
                          KarateEmbeddedJavascriptElement(EOS)
                            PsiElement(SEMI)(';')
                        PsiElement(WS_LF)('\n    ')
                        PsiElement(R_CURLY)('}')
      GherkinStep:calculateSum
        PsiElement(STEP_KEYWORD)('*')
        PsiElement(ACTION_KEYWORD)('def')
        KarateDeclaration(declaration)
          PsiElement(DECLARATION)('sum')
        PsiElement(OPERATOR)('=')
        PsiElement(TEXT)('calculateSum')
        KarateParenElement(paren element)
          PsiElement(OPEN_PAREN)('(')
          PsiElement(TEXT)('10,')
          PsiElement(TEXT)('20')
        PsiElement(CLOSE_PAREN)(')')
      GherkinStep:30
        PsiElement(STEP_KEYWORD)('*')
        PsiElement(ACTION_KEYWORD)('match')
        KarateDeclaration(variable)
          PsiElement(VARIABLE)('sum')
        PsiElement(OPERATOR)('==')
        PsiElement(TEXT)('30')
    GherkinScenario:
      PsiElement(SCENARIO_KEYWORD)('Scenario:')
      PsiElement(TEXT)('Flatten a deeply nested JSON object')
      GherkinStep:
        PsiElement(STEP_KEYWORD)('*')
        PsiElement(ACTION_KEYWORD)('def')
        KarateDeclaration(declaration)
          PsiElement(DECLARATION)('nestedJson')
        PsiElement(OPERATOR)('=')
        GherkinPystring
          KarateEmbeddedJsonElement(json_element)
            KarateEmbeddedJsonElement(json_element)
              JsonObject
                PsiElement({)('{')
                JsonProperty
                  JsonStringLiteral
                    PsiElement(DOUBLE_QUOTED_STRING)('"level1"')
                  PsiElement(:)(':')
                  JsonObject
                    PsiElement({)('{')
                    JsonProperty
                      JsonStringLiteral
                        PsiElement(DOUBLE_QUOTED_STRING)('"level2"')
                      PsiElement(:)(':')
                      JsonObject
                        PsiElement({)('{')
                        JsonProperty
                          JsonStringLiteral
                            PsiElement(DOUBLE_QUOTED_STRING)('"level3"')
                          PsiElement(:)(':')
                          JsonObject
                            PsiElement({)('{')
                            JsonProperty
                              JsonStringLiteral
                                PsiElement(DOUBLE_QUOTED_STRING)('"key"')
                              PsiElement(:)(':')
                              JsonStringLiteral
                                PsiElement(DOUBLE_QUOTED_STRING)('"value"')
                            PsiElement(})('}')
                        PsiElement(,)(',')
                        JsonProperty
                          JsonStringLiteral
                            PsiElement(DOUBLE_QUOTED_STRING)('"anotherKey"')
                          PsiElement(:)(':')
                          JsonStringLiteral
                            PsiElement(DOUBLE_QUOTED_STRING)('"anotherValue"')
                        PsiElement(})('}')
                    PsiElement(})('}')
                PsiElement(})('}')
      GherkinStep:
        PsiElement(STEP_KEYWORD)('*')
        PsiElement(ACTION_KEYWORD)('def')
        KarateDeclaration(declaration)
          PsiElement(DECLARATION)('flattenJson')
        PsiElement(OPERATOR)('=')
        GherkinPystring
          KarateEmbeddedJavascriptElement(javascript_element)
            KarateEmbeddedJavascriptElement(javascript_element)
              KarateEmbeddedJavascriptElement(PROGRAM)
                KarateEmbeddedJavascriptElement(STATEMENT)
                  KarateEmbeddedJavascriptElement(EXPR)
                    KarateEmbeddedJavascriptElement(FN_EXPR)
                      PsiElement(FUNCTION)('function')
                      PsiElement(L_PAREN)('(')
                      KarateEmbeddedJavascriptElement(FN_DECL_ARGS)
                        KarateEmbeddedJavascriptElement(FN_DECL_ARG)
                          PsiElement(IDENT)('obj')
                          PsiElement(COMMA)(',')
                        PsiElement(WS)(' ')
                        KarateEmbeddedJavascriptElement(FN_DECL_ARG)
                          PsiElement(IDENT)('prefix')
                      PsiElement(R_PAREN)(')')
                      PsiElement(WS)(' ')
                      KarateEmbeddedJavascriptElement(BLOCK)
                        PsiElement(L_CURLY)('{')
                        PsiElement(WS_LF)('\n      ')
                        KarateEmbeddedJavascriptElement(STATEMENT)
                          KarateEmbeddedJavascriptElement(VAR_STMT)
                            PsiElement(VAR)('var')
                            PsiElement(WS)(' ')
                            KarateEmbeddedJavascriptElement(VAR_STMT_NAMES)
                              PsiElement(IDENT)('result')
                            PsiElement(WS)(' ')
                            PsiElement(EQ)('=')
                            PsiElement(WS)(' ')
                            KarateEmbeddedJavascriptElement(EXPR)
                              KarateEmbeddedJavascriptElement(LIT_EXPR)
                                KarateEmbeddedJavascriptElement(LIT_OBJECT)
                                  PsiElement(L_CURLY)('{')
                                  PsiElement(R_CURLY)('}')
                          KarateEmbeddedJavascriptElement(EOS)
                            PsiElement(SEMI)(';')
                        PsiElement(WS_LF)('\n      ')
                        KarateEmbeddedJavascriptElement(STATEMENT)
                          KarateEmbeddedJavascriptElement(FOR_STMT)
                            PsiElement(FOR)('for')
                            PsiElement(WS)(' ')
                            PsiElement(L_PAREN)('(')
                            KarateEmbeddedJavascriptElement(VAR_STMT)
                              PsiElement(VAR)('var')
                              PsiElement(WS)(' ')
                              KarateEmbeddedJavascriptElement(VAR_STMT_NAMES)
                                PsiElement(IDENT)('key')
                            PsiElement(WS)(' ')
                            PsiElement(IN)('in')
                            PsiElement(WS)(' ')
                            KarateEmbeddedJavascriptElement(EXPR)
                              KarateEmbeddedJavascriptElement(REF_EXPR)
                                PsiElement(IDENT)('obj')
                            PsiElement(R_PAREN)(')')
                            PsiElement(WS)(' ')
                            KarateEmbeddedJavascriptElement(STATEMENT)
                              KarateEmbeddedJavascriptElement(BLOCK)
                                PsiElement(L_CURLY)('{')
                                PsiElement(WS_LF)('\n        ')
                                KarateEmbeddedJavascriptElement(STATEMENT)
                                  KarateEmbeddedJavascriptElement(VAR_STMT)
                                    PsiElement(VAR)('var')
                                    PsiElement(WS)(' ')
                                    KarateEmbeddedJavascriptElement(VAR_STMT_NAMES)
                                      PsiElement(IDENT)('prefixedKey')
                                    PsiElement(WS)(' ')
                                    PsiElement(EQ)('=')
                                    PsiElement(WS)(' ')
                                    KarateEmbeddedJavascriptElement(EXPR)
                                      KarateEmbeddedJavascriptElement(REF_EXPR)
                                        PsiElement(IDENT)('prefix')
                                      PsiElement(WS)(' ')
                                      KarateEmbeddedJavascriptElement(LOGIC_TERN_EXPR)
                                        PsiElement(QUES)('?')
                                        PsiElement(WS)(' ')
                                        KarateEmbeddedJavascriptElement(EXPR)
                                          KarateEmbeddedJavascriptElement(REF_EXPR)
                                            PsiElement(IDENT)('prefix')
                                          PsiElement(WS)(' ')
                                          KarateEmbeddedJavascriptElement(MATH_ADD_EXPR)
                                            PsiElement(PLUS)('+')
                                            PsiElement(WS)(' ')
                                            KarateEmbeddedJavascriptElement(EXPR)
                                              KarateEmbeddedJavascriptElement(LIT_EXPR)
                                                PsiElement(S_STRING)(''.'')
                                          PsiElement(WS)(' ')
                                          KarateEmbeddedJavascriptElement(MATH_ADD_EXPR)
                                            PsiElement(PLUS)('+')
                                            PsiElement(WS)(' ')
                                            KarateEmbeddedJavascriptElement(EXPR)
                                              KarateEmbeddedJavascriptElement(REF_EXPR)
                                                PsiElement(IDENT)('key')
                                        PsiElement(WS)(' ')
                                        PsiElement(COLON)(':')
                                        PsiElement(WS)(' ')
                                        KarateEmbeddedJavascriptElement(EXPR)
                                          KarateEmbeddedJavascriptElement(REF_EXPR)
                                            PsiElement(IDENT)('key')
                                  KarateEmbeddedJavascriptElement(EOS)
                                    PsiElement(SEMI)(';')
                                PsiElement(WS_LF)('\n        ')
                                KarateEmbeddedJavascriptElement(STATEMENT)
                                  KarateEmbeddedJavascriptElement(IF_STMT)
                                    PsiElement(IF)('if')
                                    PsiElement(WS)(' ')
                                    PsiElement(L_PAREN)('(')
                                    KarateEmbeddedJavascriptElement(EXPR)
                                      KarateEmbeddedJavascriptElement(TYPEOF_EXPR)
                                        PsiElement(TYPEOF)('typeof')
                                        PsiElement(WS)(' ')
                                        KarateEmbeddedJavascriptElement(EXPR)
                                          KarateEmbeddedJavascriptElement(REF_EXPR)
                                            PsiElement(IDENT)('obj')
                                          KarateEmbeddedJavascriptElement(REF_BRACKET_EXPR)
                                            PsiElement(L_BRACKET)('[')
                                            KarateEmbeddedJavascriptElement(EXPR)
                                              KarateEmbeddedJavascriptElement(REF_EXPR)
                                                PsiElement(IDENT)('key')
                                            PsiElement(R_BRACKET)(']')
                                      PsiElement(WS)(' ')
                                      KarateEmbeddedJavascriptElement(LOGIC_EXPR)
                                        PsiElement(EQ_EQ_EQ)('===')
                                        PsiElement(WS)(' ')
                                        KarateEmbeddedJavascriptElement(EXPR)
                                          KarateEmbeddedJavascriptElement(LIT_EXPR)
                                            PsiElement(S_STRING)(''object'')
                                      PsiElement(WS)(' ')
                                      KarateEmbeddedJavascriptElement(LOGIC_AND_EXPR)
                                        PsiElement(AMP_AMP)('&&')
                                        PsiElement(WS)(' ')
                                        KarateEmbeddedJavascriptElement(EXPR)
                                          KarateEmbeddedJavascriptElement(REF_EXPR)
                                            PsiElement(IDENT)('obj')
                                          KarateEmbeddedJavascriptElement(REF_BRACKET_EXPR)
                                            PsiElement(L_BRACKET)('[')
                                            KarateEmbeddedJavascriptElement(EXPR)
                                              KarateEmbeddedJavascriptElement(REF_EXPR)
                                                PsiElement(IDENT)('key')
                                            PsiElement(R_BRACKET)(']')
                                          PsiElement(WS)(' ')
                                          KarateEmbeddedJavascriptElement(LOGIC_EXPR)
                                            PsiElement(NOT_EQ_EQ)('!==')
                                            PsiElement(WS)(' ')
                                            KarateEmbeddedJavascriptElement(EXPR)
                                              KarateEmbeddedJavascriptElement(LIT_EXPR)
                                                PsiElement(NULL)('null')
                                    PsiElement(R_PAREN)(')')
                                    PsiElement(WS)(' ')
                                    KarateEmbeddedJavascriptElement(STATEMENT)
                                      KarateEmbeddedJavascriptElement(BLOCK)
                                        PsiElement(L_CURLY)('{')
                                        PsiElement(WS_LF)('\n          ')
                                        KarateEmbeddedJavascriptElement(STATEMENT)
                                          KarateEmbeddedJavascriptElement(EXPR)
                                            KarateEmbeddedJavascriptElement(REF_EXPR)
                                              PsiElement(IDENT)('Object')
                                            KarateEmbeddedJavascriptElement(REF_DOT_EXPR)
                                              PsiElement(DOT)('.')
                                              PsiElement(IDENT)('assign')
                                            KarateEmbeddedJavascriptElement(FN_CALL_EXPR)
                                              PsiElement(L_PAREN)('(')
                                              KarateEmbeddedJavascriptElement(FN_CALL_ARGS)
                                                KarateEmbeddedJavascriptElement(FN_CALL_ARG)
                                                  KarateEmbeddedJavascriptElement(EXPR)
                                                    KarateEmbeddedJavascriptElement(REF_EXPR)
                                                      PsiElement(IDENT)('result')
                                                  PsiElement(COMMA)(',')
                                                PsiElement(WS)(' ')
                                                KarateEmbeddedJavascriptElement(FN_CALL_ARG)
                                                  KarateEmbeddedJavascriptElement(EXPR)
                                                    KarateEmbeddedJavascriptElement(REF_EXPR)
                                                      PsiElement(IDENT)('flattenJson')
                                                    KarateEmbeddedJavascriptElement(FN_CALL_EXPR)
                                                      PsiElement(L_PAREN)('(')
                                                      KarateEmbeddedJavascriptElement(FN_CALL_ARGS)
                                                        KarateEmbeddedJavascriptElement(FN_CALL_ARG)
                                                          KarateEmbeddedJavascriptElement(EXPR)
                                                            KarateEmbeddedJavascriptElement(REF_EXPR)
                                                              PsiElement(IDENT)('obj')
                                                            KarateEmbeddedJavascriptElement(REF_BRACKET_EXPR)
                                                              PsiElement(L_BRACKET)('[')
                                                              KarateEmbeddedJavascriptElement(EXPR)
                                                                KarateEmbeddedJavascriptElement(REF_EXPR)
                                                                  PsiElement(IDENT)('key')
                                                              PsiElement(R_BRACKET)(']')
                                                          PsiElement(COMMA)(',')
                                                        PsiElement(WS)(' ')
                                                        KarateEmbeddedJavascriptElement(FN_CALL_ARG)
                                                          KarateEmbeddedJavascriptElement(EXPR)
                                                            KarateEmbeddedJavascriptElement(REF_EXPR)
                                                              PsiElement(IDENT)('prefixedKey')
                                                      PsiElement(R_PAREN)(')')
                                              PsiElement(R_PAREN)(')')
                                          KarateEmbeddedJavascriptElement(EOS)
                                            PsiElement(SEMI)(';')
                                        PsiElement(WS_LF)('\n        ')
                                        PsiElement(R_CURLY)('}')
                                    PsiElement(WS)(' ')
                                    PsiElement(ELSE)('else')
                                    PsiElement(WS)(' ')
                                    KarateEmbeddedJavascriptElement(STATEMENT)
                                      KarateEmbeddedJavascriptElement(BLOCK)
                                        PsiElement(L_CURLY)('{')
                                        PsiElement(WS_LF)('\n          ')
                                        KarateEmbeddedJavascriptElement(STATEMENT)
                                          KarateEmbeddedJavascriptElement(EXPR)
                                            KarateEmbeddedJavascriptElement(REF_EXPR)
                                              PsiElement(IDENT)('result')
                                            KarateEmbeddedJavascriptElement(REF_BRACKET_EXPR)
                                              PsiElement(L_BRACKET)('[')
                                              KarateEmbeddedJavascriptElement(EXPR)
                                                KarateEmbeddedJavascriptElement(REF_EXPR)
                                                  PsiElement(IDENT)('prefixedKey')
                                              PsiElement(R_BRACKET)(']')
                                            PsiElement(WS)(' ')
                                            KarateEmbeddedJavascriptElement(ASSIGN_EXPR)
                                              PsiElement(EQ)('=')
                                              PsiElement(WS)(' ')
                                              KarateEmbeddedJavascriptElement(EXPR)
                                                KarateEmbeddedJavascriptElement(REF_EXPR)
                                                  PsiElement(IDENT)('obj')
                                                KarateEmbeddedJavascriptElement(REF_BRACKET_EXPR)
                                                  PsiElement(L_BRACKET)('[')
                                                  KarateEmbeddedJavascriptElement(EXPR)
                                                    KarateEmbeddedJavascriptElement(REF_EXPR)
                                                      PsiElement(IDENT)('key')
                                                  PsiElement(R_BRACKET)(']')
                                          KarateEmbeddedJavascriptElement(EOS)
                                            PsiElement(SEMI)(';')
                                        PsiElement(WS_LF)('\n        ')
                                        PsiElement(R_CURLY)('}')
                                PsiElement(WS_LF)('\n      ')
                                PsiElement(R_CURLY)('}')
                        PsiElement(WS_LF)('\n      ')
                        KarateEmbeddedJavascriptElement(STATEMENT)
                          KarateEmbeddedJavascriptElement(RETURN_STMT)
                            PsiElement(RETURN)('return')
                            PsiElement(WS)(' ')
                            KarateEmbeddedJavascriptElement(EXPR)
                              KarateEmbeddedJavascriptElement(REF_EXPR)
                                PsiElement(IDENT)('result')
                          KarateEmbeddedJavascriptElement(EOS)
                            PsiElement(SEMI)(';')
                        PsiElement(WS_LF)('\n    ')
                        PsiElement(R_CURLY)('}')
      GherkinStep:flattenJson
        PsiElement(STEP_KEYWORD)('*')
        PsiElement(ACTION_KEYWORD)('def')
        KarateDeclaration(declaration)
          PsiElement(DECLARATION)('flattened')
        PsiElement(OPERATOR)('=')
        PsiElement(TEXT)('flattenJson')
        KarateParenElement(paren element)
          PsiElement(OPEN_PAREN)('(')
          PsiElement(TEXT)('nestedJson,')
          PsiElement(SINGLE_QUOTED_STRING)('''')
        PsiElement(CLOSE_PAREN)(')')
      GherkinStep:, flattened
        PsiElement(STEP_KEYWORD)('*')
        PsiElement(ACTION_KEYWORD)('print')
        PsiElement(SINGLE_QUOTED_STRING)(''Flattened JSON:'')
        PsiElement(TEXT)(',')
        PsiElement(TEXT)('flattened')
      GherkinStep:
        PsiElement(STEP_KEYWORD)('*')
        PsiElement(ACTION_KEYWORD)('match')
        KarateDeclaration(variable)
          PsiElement(VARIABLE)('flattened')
        PsiElement(OPERATOR)('==')
        GherkinPystring
          KarateEmbeddedJsonElement(json_element)
            KarateEmbeddedJsonElement(json_element)
              JsonObject
                PsiElement({)('{')
                JsonProperty
                  JsonStringLiteral
                    PsiElement(SINGLE_QUOTED_STRING)(''level1.level2.level3.key'')
                  PsiElement(:)(':')
                  JsonStringLiteral
                    PsiElement(SINGLE_QUOTED_STRING)(''value'')
                PsiElement(,)(',')
                JsonProperty
                  JsonStringLiteral
                    PsiElement(SINGLE_QUOTED_STRING)(''level1.level2.anotherKey'')
                  PsiElement(:)(':')
                  JsonStringLiteral
                    PsiElement(SINGLE_QUOTED_STRING)(''anotherValue'')
                PsiElement(})('}')
    GherkinScenario:
      PsiElement(SCENARIO_KEYWORD)('Scenario:')
      PsiElement(TEXT)('Merge multiple JSON arrays into a single array')
      GherkinStep:
        PsiElement(STEP_KEYWORD)('*')
        PsiElement(ACTION_KEYWORD)('def')
        KarateDeclaration(declaration)
          PsiElement(DECLARATION)('arrays')
        PsiElement(OPERATOR)('=')
        GherkinPystring
          KarateEmbeddedJsonElement(json_element)
            KarateEmbeddedJsonElement(json_element)
              JsonArray
                PsiElement([)('[')
                JsonArray
                  PsiElement([)('[')
                  JsonObject
                    PsiElement({)('{')
                    JsonProperty
                      JsonStringLiteral
                        PsiElement(DOUBLE_QUOTED_STRING)('"id"')
                      PsiElement(:)(':')
                      JsonNumberLiteral
                        PsiElement(NUMBER)('1')
                    PsiElement(,)(',')
                    JsonProperty
                      JsonStringLiteral
                        PsiElement(DOUBLE_QUOTED_STRING)('"name"')
                      PsiElement(:)(':')
                      JsonStringLiteral
                        PsiElement(DOUBLE_QUOTED_STRING)('"Item1"')
                    PsiElement(})('}')
                  PsiElement(,)(',')
                  JsonObject
                    PsiElement({)('{')
                    JsonProperty
                      JsonStringLiteral
                        PsiElement(DOUBLE_QUOTED_STRING)('"id"')
                      PsiElement(:)(':')
                      JsonNumberLiteral
                        PsiElement(NUMBER)('2')
                    PsiElement(,)(',')
                    JsonProperty
                      JsonStringLiteral
                        PsiElement(DOUBLE_QUOTED_STRING)('"name"')
                      PsiElement(:)(':')
                      JsonStringLiteral
                        PsiElement(DOUBLE_QUOTED_STRING)('"Item2"')
                    PsiElement(})('}')
                  PsiElement(])(']')
                PsiElement(,)(',')
                JsonArray
                  PsiElement([)('[')
                  JsonObject
                    PsiElement({)('{')
                    JsonProperty
                      JsonStringLiteral
                        PsiElement(DOUBLE_QUOTED_STRING)('"id"')
                      PsiElement(:)(':')
                      JsonNumberLiteral
                        PsiElement(NUMBER)('3')
                    PsiElement(,)(',')
                    JsonProperty
                      JsonStringLiteral
                        PsiElement(DOUBLE_QUOTED_STRING)('"name"')
                      PsiElement(:)(':')
                      JsonStringLiteral
                        PsiElement(DOUBLE_QUOTED_STRING)('"Item3"')
                    PsiElement(})('}')
                  PsiElement(,)(',')
                  JsonObject
                    PsiElement({)('{')
                    JsonProperty
                      JsonStringLiteral
                        PsiElement(DOUBLE_QUOTED_STRING)('"id"')
                      PsiElement(:)(':')
                      JsonNumberLiteral
                        PsiElement(NUMBER)('4')
                    PsiElement(,)(',')
                    JsonProperty
                      JsonStringLiteral
                        PsiElement(DOUBLE_QUOTED_STRING)('"name"')
                      PsiElement(:)(':')
                      JsonStringLiteral
                        PsiElement(DOUBLE_QUOTED_STRING)('"Item4"')
                    PsiElement(})('}')
                  PsiElement(])(']')
                PsiElement(,)(',')
                JsonArray
                  PsiElement([)('[')
                  JsonObject
                    PsiElement({)('{')
                    JsonProperty
                      JsonStringLiteral
                        PsiElement(DOUBLE_QUOTED_STRING)('"id"')
                      PsiElement(:)(':')
                      JsonNumberLiteral
                        PsiElement(NUMBER)('5')
                    PsiElement(,)(',')
                    JsonProperty
                      JsonStringLiteral
                        PsiElement(DOUBLE_QUOTED_STRING)('"name"')
                      PsiElement(:)(':')
                      JsonStringLiteral
                        PsiElement(DOUBLE_QUOTED_STRING)('"Item5"')
                    PsiElement(})('}')
                  PsiElement(])(']')
                PsiElement(])(']')
      GherkinStep:
        PsiElement(STEP_KEYWORD)('*')
        PsiElement(ACTION_KEYWORD)('def')
        KarateDeclaration(declaration)
          PsiElement(DECLARATION)('mergeArrays')
        PsiElement(OPERATOR)('=')
        GherkinPystring
          KarateEmbeddedJavascriptElement(javascript_element)
            KarateEmbeddedJavascriptElement(javascript_element)
              KarateEmbeddedJavascriptElement(PROGRAM)
                KarateEmbeddedJavascriptElement(STATEMENT)
                  KarateEmbeddedJavascriptElement(EXPR)
                    KarateEmbeddedJavascriptElement(FN_EXPR)
                      PsiElement(FUNCTION)('function')
                      PsiElement(L_PAREN)('(')
                      KarateEmbeddedJavascriptElement(FN_DECL_ARGS)
                        KarateEmbeddedJavascriptElement(FN_DECL_ARG)
                          PsiElement(IDENT)('arrays')
                      PsiElement(R_PAREN)(')')
                      PsiElement(WS)(' ')
                      KarateEmbeddedJavascriptElement(BLOCK)
                        PsiElement(L_CURLY)('{')
                        PsiElement(WS_LF)('\n      ')
                        KarateEmbeddedJavascriptElement(STATEMENT)
                          KarateEmbeddedJavascriptElement(VAR_STMT)
                            PsiElement(VAR)('var')
                            PsiElement(WS)(' ')
                            KarateEmbeddedJavascriptElement(VAR_STMT_NAMES)
                              PsiElement(IDENT)('merged')
                            PsiElement(WS)(' ')
                            PsiElement(EQ)('=')
                            PsiElement(WS)(' ')
                            KarateEmbeddedJavascriptElement(EXPR)
                              KarateEmbeddedJavascriptElement(LIT_EXPR)
                                KarateEmbeddedJavascriptElement(LIT_ARRAY)
                                  PsiElement(L_BRACKET)('[')
                                  PsiElement(R_BRACKET)(']')
                          KarateEmbeddedJavascriptElement(EOS)
                            PsiElement(SEMI)(';')
                        PsiElement(WS_LF)('\n      ')
                        KarateEmbeddedJavascriptElement(STATEMENT)
                          KarateEmbeddedJavascriptElement(EXPR)
                            KarateEmbeddedJavascriptElement(REF_EXPR)
                              PsiElement(IDENT)('arrays')
                            KarateEmbeddedJavascriptElement(REF_DOT_EXPR)
                              PsiElement(DOT)('.')
                              PsiElement(IDENT)('forEach')
                            KarateEmbeddedJavascriptElement(FN_CALL_EXPR)
                              PsiElement(L_PAREN)('(')
                              KarateEmbeddedJavascriptElement(FN_CALL_ARGS)
                                KarateEmbeddedJavascriptElement(FN_CALL_ARG)
                                  KarateEmbeddedJavascriptElement(EXPR)
                                    KarateEmbeddedJavascriptElement(FN_EXPR)
                                      PsiElement(FUNCTION)('function')
                                      PsiElement(L_PAREN)('(')
                                      KarateEmbeddedJavascriptElement(FN_DECL_ARGS)
                                        KarateEmbeddedJavascriptElement(FN_DECL_ARG)
                                          PsiElement(IDENT)('array')
                                      PsiElement(R_PAREN)(')')
                                      PsiElement(WS)(' ')
                                      KarateEmbeddedJavascriptElement(BLOCK)
                                        PsiElement(L_CURLY)('{')
                                        PsiElement(WS_LF)('\n        ')
                                        KarateEmbeddedJavascriptElement(STATEMENT)
                                          KarateEmbeddedJavascriptElement(EXPR)
                                            KarateEmbeddedJavascriptElement(REF_EXPR)
                                              PsiElement(IDENT)('merged')
                                            PsiElement(WS)(' ')
                                            KarateEmbeddedJavascriptElement(ASSIGN_EXPR)
                                              PsiElement(EQ)('=')
                                              PsiElement(WS)(' ')
                                              KarateEmbeddedJavascriptElement(EXPR)
                                                KarateEmbeddedJavascriptElement(REF_EXPR)
                                                  PsiElement(IDENT)('merged')
                                                KarateEmbeddedJavascriptElement(REF_DOT_EXPR)
                                                  PsiElement(DOT)('.')
                                                  PsiElement(IDENT)('concat')
                                                KarateEmbeddedJavascriptElement(FN_CALL_EXPR)
                                                  PsiElement(L_PAREN)('(')
                                                  KarateEmbeddedJavascriptElement(FN_CALL_ARGS)
                                                    KarateEmbeddedJavascriptElement(FN_CALL_ARG)
                                                      KarateEmbeddedJavascriptElement(EXPR)
                                                        KarateEmbeddedJavascriptElement(REF_EXPR)
                                                          PsiElement(IDENT)('array')
                                                  PsiElement(R_PAREN)(')')
                                          KarateEmbeddedJavascriptElement(EOS)
                                            PsiElement(SEMI)(';')
                                        PsiElement(WS_LF)('\n      ')
                                        PsiElement(R_CURLY)('}')
                              PsiElement(R_PAREN)(')')
                          KarateEmbeddedJavascriptElement(EOS)
                            PsiElement(SEMI)(';')
                        PsiElement(WS_LF)('\n      ')
                        KarateEmbeddedJavascriptElement(STATEMENT)
                          KarateEmbeddedJavascriptElement(RETURN_STMT)
                            PsiElement(RETURN)('return')
                            PsiElement(WS)(' ')
                            KarateEmbeddedJavascriptElement(EXPR)
                              KarateEmbeddedJavascriptElement(REF_EXPR)
                                PsiElement(IDENT)('merged')
                          KarateEmbeddedJavascriptElement(EOS)
                            PsiElement(SEMI)(';')
                        PsiElement(WS_LF)('\n    ')
                        PsiElement(R_CURLY)('}')
      GherkinStep:mergeArrays
        PsiElement(STEP_KEYWORD)('*')
        PsiElement(ACTION_KEYWORD)('def')
        KarateDeclaration(declaration)
          PsiElement(DECLARATION)('result')
        PsiElement(OPERATOR)('=')
        PsiElement(TEXT)('mergeArrays')
        KarateParenElement(paren element)
          PsiElement(OPEN_PAREN)('(')
          PsiElement(TEXT)('arrays')
        PsiElement(CLOSE_PAREN)(')')
      GherkinStep:, result
        PsiElement(STEP_KEYWORD)('*')
        PsiElement(ACTION_KEYWORD)('print')
        PsiElement(SINGLE_QUOTED_STRING)(''Merged JSON Array:'')
        PsiElement(TEXT)(',')
        PsiElement(TEXT)('result')
      GherkinStep:
        PsiElement(STEP_KEYWORD)('*')
        PsiElement(ACTION_KEYWORD)('match')
        KarateDeclaration(variable)
          PsiElement(VARIABLE)('result')
        PsiElement(OPERATOR)('==')
        GherkinPystring
          KarateEmbeddedJsonElement(json_element)
            KarateEmbeddedJsonElement(json_element)
              JsonArray
                PsiElement([)('[')
                JsonObject
                  PsiElement({)('{')
                  JsonProperty
                    JsonReferenceExpression
                      PsiElement(IDENTIFIER)('id')
                    PsiElement(:)(':')
                    JsonNumberLiteral
                      PsiElement(NUMBER)('1')
                  PsiElement(,)(',')
                  JsonProperty
                    JsonReferenceExpression
                      PsiElement(IDENTIFIER)('name')
                    PsiElement(:)(':')
                    JsonStringLiteral
                      PsiElement(SINGLE_QUOTED_STRING)(''Item1'')
                  PsiElement(})('}')
                PsiElement(,)(',')
                JsonObject
                  PsiElement({)('{')
                  JsonProperty
                    JsonReferenceExpression
                      PsiElement(IDENTIFIER)('id')
                    PsiElement(:)(':')
                    JsonNumberLiteral
                      PsiElement(NUMBER)('2')
                  PsiElement(,)(',')
                  JsonProperty
                    JsonReferenceExpression
                      PsiElement(IDENTIFIER)('name')
                    PsiElement(:)(':')
                    JsonStringLiteral
                      PsiElement(SINGLE_QUOTED_STRING)(''Item2'')
                  PsiElement(})('}')
                PsiElement(,)(',')
                JsonObject
                  PsiElement({)('{')
                  JsonProperty
                    JsonReferenceExpression
                      PsiElement(IDENTIFIER)('id')
                    PsiElement(:)(':')
                    JsonNumberLiteral
                      PsiElement(NUMBER)('3')
                  PsiElement(,)(',')
                  JsonProperty
                    JsonReferenceExpression
                      PsiElement(IDENTIFIER)('name')
                    PsiElement(:)(':')
                    JsonStringLiteral
                      PsiElement(SINGLE_QUOTED_STRING)(''Item3'')
                  PsiElement(})('}')
                PsiElement(,)(',')
                JsonObject
                  PsiElement({)('{')
                  JsonProperty
                    JsonReferenceExpression
                      PsiElement(IDENTIFIER)('id')
                    PsiElement(:)(':')
                    JsonNumberLiteral
                      PsiElement(NUMBER)('4')
                  PsiElement(,)(',')
                  JsonProperty
                    JsonReferenceExpression
                      PsiElement(IDENTIFIER)('name')
                    PsiElement(:)(':')
                    JsonStringLiteral
                      PsiElement(SINGLE_QUOTED_STRING)(''Item4'')
                  PsiElement(})('}')
                PsiElement(,)(',')
                JsonObject
                  PsiElement({)('{')
                  JsonProperty
                    JsonReferenceExpression
                      PsiElement(IDENTIFIER)('id')
                    PsiElement(:)(':')
                    JsonNumberLiteral
                      PsiElement(NUMBER)('5')
                  PsiElement(,)(',')
                  JsonProperty
                    JsonReferenceExpression
                      PsiElement(IDENTIFIER)('name')
                    PsiElement(:)(':')
                    JsonStringLiteral
                      PsiElement(SINGLE_QUOTED_STRING)(''Item5'')
                  PsiElement(})('}')
                PsiElement(])(']')
    GherkinScenario:
      PsiElement(SCENARIO_KEYWORD)('Scenario:')
      PsiElement(TEXT)('Generate JSON dynamically using embedded JavaScript')
      GherkinStep:
        PsiElement(STEP_KEYWORD)('*')
        PsiElement(ACTION_KEYWORD)('def')
        KarateDeclaration(declaration)
          PsiElement(DECLARATION)('generateDynamicJson')
        PsiElement(OPERATOR)('=')
        GherkinPystring
          KarateEmbeddedJavascriptElement(javascript_element)
            KarateEmbeddedJavascriptElement(javascript_element)
              KarateEmbeddedJavascriptElement(PROGRAM)
                KarateEmbeddedJavascriptElement(STATEMENT)
                  KarateEmbeddedJavascriptElement(EXPR)
                    KarateEmbeddedJavascriptElement(FN_EXPR)
                      PsiElement(FUNCTION)('function')
                      PsiElement(L_PAREN)('(')
                      KarateEmbeddedJavascriptElement(FN_DECL_ARGS)
                        <empty list>
                      PsiElement(R_PAREN)(')')
                      PsiElement(WS)(' ')
                      KarateEmbeddedJavascriptElement(BLOCK)
                        PsiElement(L_CURLY)('{')
                        PsiElement(WS_LF)('\n      ')
                        KarateEmbeddedJavascriptElement(STATEMENT)
                          KarateEmbeddedJavascriptElement(VAR_STMT)
                            PsiElement(VAR)('var')
                            PsiElement(WS)(' ')
                            KarateEmbeddedJavascriptElement(VAR_STMT_NAMES)
                              PsiElement(IDENT)('result')
                            PsiElement(WS)(' ')
                            PsiElement(EQ)('=')
                            PsiElement(WS)(' ')
                            KarateEmbeddedJavascriptElement(EXPR)
                              KarateEmbeddedJavascriptElement(LIT_EXPR)
                                KarateEmbeddedJavascriptElement(LIT_OBJECT)
                                  PsiElement(L_CURLY)('{')
                                  PsiElement(R_CURLY)('}')
                          KarateEmbeddedJavascriptElement(EOS)
                            PsiElement(SEMI)(';')
                        PsiElement(WS_LF)('\n      ')
                        KarateEmbeddedJavascriptElement(STATEMENT)
                          KarateEmbeddedJavascriptElement(FOR_STMT)
                            PsiElement(FOR)('for')
                            PsiElement(WS)(' ')
                            PsiElement(L_PAREN)('(')
                            KarateEmbeddedJavascriptElement(VAR_STMT)
                              PsiElement(VAR)('var')
                              PsiElement(WS)(' ')
                              KarateEmbeddedJavascriptElement(VAR_STMT_NAMES)
                                PsiElement(IDENT)('i')
                              PsiElement(WS)(' ')
                              PsiElement(EQ)('=')
                              PsiElement(WS)(' ')
                              KarateEmbeddedJavascriptElement(EXPR)
                                KarateEmbeddedJavascriptElement(LIT_EXPR)
                                  PsiElement(NUMBER)('1')
                            PsiElement(SEMI)(';')
                            PsiElement(WS)(' ')
                            KarateEmbeddedJavascriptElement(EXPR)
                              KarateEmbeddedJavascriptElement(REF_EXPR)
                                PsiElement(IDENT)('i')
                              PsiElement(WS)(' ')
                              KarateEmbeddedJavascriptElement(LOGIC_EXPR)
                                PsiElement(LT_EQ)('<=')
                                PsiElement(WS)(' ')
                                KarateEmbeddedJavascriptElement(EXPR)
                                  KarateEmbeddedJavascriptElement(LIT_EXPR)
                                    PsiElement(NUMBER)('5')
                            PsiElement(SEMI)(';')
                            PsiElement(WS)(' ')
                            KarateEmbeddedJavascriptElement(EXPR)
                              KarateEmbeddedJavascriptElement(REF_EXPR)
                                PsiElement(IDENT)('i')
                              KarateEmbeddedJavascriptElement(MATH_POST_EXPR)
                                PsiElement(PLUS_PLUS)('++')
                            PsiElement(R_PAREN)(')')
                            PsiElement(WS)(' ')
                            KarateEmbeddedJavascriptElement(STATEMENT)
                              KarateEmbeddedJavascriptElement(BLOCK)
                                PsiElement(L_CURLY)('{')
                                PsiElement(WS_LF)('\n        ')
                                KarateEmbeddedJavascriptElement(STATEMENT)
                                  KarateEmbeddedJavascriptElement(EXPR)
                                    KarateEmbeddedJavascriptElement(REF_EXPR)
                                      PsiElement(IDENT)('result')
                                    KarateEmbeddedJavascriptElement(REF_BRACKET_EXPR)
                                      PsiElement(L_BRACKET)('[')
                                      KarateEmbeddedJavascriptElement(EXPR)
                                        KarateEmbeddedJavascriptElement(LIT_EXPR)
                                          PsiElement(S_STRING)(''key'')
                                        PsiElement(WS)(' ')
                                        KarateEmbeddedJavascriptElement(MATH_ADD_EXPR)
                                          PsiElement(PLUS)('+')
                                          PsiElement(WS)(' ')
                                          KarateEmbeddedJavascriptElement(EXPR)
                                            KarateEmbeddedJavascriptElement(REF_EXPR)
                                              PsiElement(IDENT)('i')
                                      PsiElement(R_BRACKET)(']')
                                    PsiElement(WS)(' ')
                                    KarateEmbeddedJavascriptElement(ASSIGN_EXPR)
                                      PsiElement(EQ)('=')
                                      PsiElement(WS)(' ')
                                      KarateEmbeddedJavascriptElement(EXPR)
                                        KarateEmbeddedJavascriptElement(LIT_EXPR)
                                          KarateEmbeddedJavascriptElement(LIT_OBJECT)
                                            PsiElement(L_CURLY)('{')
                                            PsiElement(WS)(' ')
                                            KarateEmbeddedJavascriptElement(OBJECT_ELEM)
                                              PsiElement(IDENT)('value')
                                              PsiElement(COLON)(':')
                                              PsiElement(WS)(' ')
                                              KarateEmbeddedJavascriptElement(EXPR)
                                                KarateEmbeddedJavascriptElement(REF_EXPR)
                                                  PsiElement(IDENT)('i')
                                                PsiElement(WS)(' ')
                                                KarateEmbeddedJavascriptElement(MATH_MUL_EXPR)
                                                  PsiElement(STAR)('*')
                                                  PsiElement(WS)(' ')
                                                  KarateEmbeddedJavascriptElement(EXPR)
                                                    KarateEmbeddedJavascriptElement(LIT_EXPR)
                                                      PsiElement(NUMBER)('10')
                                              PsiElement(COMMA)(',')
                                            PsiElement(WS)(' ')
                                            KarateEmbeddedJavascriptElement(OBJECT_ELEM)
                                              PsiElement(IDENT)('nested')
                                              PsiElement(COLON)(':')
                                              PsiElement(WS)(' ')
                                              KarateEmbeddedJavascriptElement(EXPR)
                                                KarateEmbeddedJavascriptElement(LIT_EXPR)
                                                  KarateEmbeddedJavascriptElement(LIT_OBJECT)
                                                    PsiElement(L_CURLY)('{')
                                                    PsiElement(WS)(' ')
                                                    KarateEmbeddedJavascriptElement(OBJECT_ELEM)
                                                      PsiElement(IDENT)('id')
                                                      PsiElement(COLON)(':')
                                                      PsiElement(WS)(' ')
                                                      KarateEmbeddedJavascriptElement(EXPR)
                                                        KarateEmbeddedJavascriptElement(LIT_EXPR)
                                                          PsiElement(S_STRING)(''item'')
                                                        PsiElement(WS)(' ')
                                                        KarateEmbeddedJavascriptElement(MATH_ADD_EXPR)
                                                          PsiElement(PLUS)('+')
                                                          PsiElement(WS)(' ')
                                                          KarateEmbeddedJavascriptElement(EXPR)
                                                            KarateEmbeddedJavascriptElement(REF_EXPR)
                                                              PsiElement(IDENT)('i')
                                                    PsiElement(WS)(' ')
                                                    PsiElement(R_CURLY)('}')
                                            PsiElement(WS)(' ')
                                            PsiElement(R_CURLY)('}')
                                  KarateEmbeddedJavascriptElement(EOS)
                                    PsiElement(SEMI)(';')
                                PsiElement(WS_LF)('\n      ')
                                PsiElement(R_CURLY)('}')
                        PsiElement(WS_LF)('\n      ')
                        KarateEmbeddedJavascriptElement(STATEMENT)
                          KarateEmbeddedJavascriptElement(RETURN_STMT)
                            PsiElement(RETURN)('return')
                            PsiElement(WS)(' ')
                            KarateEmbeddedJavascriptElement(EXPR)
                              KarateEmbeddedJavascriptElement(REF_EXPR)
                                PsiElement(IDENT)('result')
                          KarateEmbeddedJavascriptElement(EOS)
                            PsiElement(SEMI)(';')
                        PsiElement(WS_LF)('\n    ')
                        PsiElement(R_CURLY)('}')
      GherkinStep:generateDynamicJson
        PsiElement(STEP_KEYWORD)('*')
        PsiElement(ACTION_KEYWORD)('def')
        KarateDeclaration(declaration)
          PsiElement(DECLARATION)('dynamicJson')
        PsiElement(OPERATOR)('=')
        PsiElement(TEXT)('generateDynamicJson')
        KarateParenElement(paren element)
          PsiElement(OPEN_PAREN)('(')
        PsiElement(CLOSE_PAREN)(')')
      GherkinStep:, dynamicJson
        PsiElement(STEP_KEYWORD)('*')
        PsiElement(ACTION_KEYWORD)('print')
        PsiElement(SINGLE_QUOTED_STRING)(''Generated JSON:'')
        PsiElement(TEXT)(',')
        PsiElement(TEXT)('dynamicJson')
      GherkinStep:
        PsiElement(STEP_KEYWORD)('*')
        PsiElement(ACTION_KEYWORD)('match')
        KarateDeclaration(variable)
          PsiElement(VARIABLE)('dynamicJson')
        PsiElement(OPERATOR)('==')
        GherkinPystring
          KarateEmbeddedJsonElement(json_element)
            KarateEmbeddedJsonElement(json_element)
              JsonObject
                PsiElement({)('{')
                JsonProperty
                  JsonReferenceExpression
                    PsiElement(IDENTIFIER)('key1')
                  PsiElement(:)(':')
                  JsonObject
                    PsiElement({)('{')
                    JsonProperty
                      JsonReferenceExpression
                        PsiElement(IDENTIFIER)('value')
                      PsiElement(:)(':')
                      JsonNumberLiteral
                        PsiElement(NUMBER)('10')
                    PsiElement(,)(',')
                    JsonProperty
                      JsonReferenceExpression
                        PsiElement(IDENTIFIER)('nested')
                      PsiElement(:)(':')
                      JsonObject
                        PsiElement({)('{')
                        JsonProperty
                          JsonReferenceExpression
                            PsiElement(IDENTIFIER)('id')
                          PsiElement(:)(':')
                          JsonStringLiteral
                            PsiElement(SINGLE_QUOTED_STRING)(''item1'')
                        PsiElement(})('}')
                    PsiElement(})('}')
                PsiElement(,)(',')
                JsonProperty
                  JsonReferenceExpression
                    PsiElement(IDENTIFIER)('key2')
                  PsiElement(:)(':')
                  JsonObject
                    PsiElement({)('{')
                    JsonProperty
                      JsonReferenceExpression
                        PsiElement(IDENTIFIER)('value')
                      PsiElement(:)(':')
                      JsonNumberLiteral
                        PsiElement(NUMBER)('20')
                    PsiElement(,)(',')
                    JsonProperty
                      JsonReferenceExpression
                        PsiElement(IDENTIFIER)('nested')
                      PsiElement(:)(':')
                      JsonObject
                        PsiElement({)('{')
                        JsonProperty
                          JsonReferenceExpression
                            PsiElement(IDENTIFIER)('id')
                          PsiElement(:)(':')
                          JsonStringLiteral
                            PsiElement(SINGLE_QUOTED_STRING)(''item2'')
                        PsiElement(})('}')
                    PsiElement(})('}')
                PsiElement(,)(',')
                JsonProperty
                  JsonReferenceExpression
                    PsiElement(IDENTIFIER)('key3')
                  PsiElement(:)(':')
                  JsonObject
                    PsiElement({)('{')
                    JsonProperty
                      JsonReferenceExpression
                        PsiElement(IDENTIFIER)('value')
                      PsiElement(:)(':')
                      JsonNumberLiteral
                        PsiElement(NUMBER)('30')
                    PsiElement(,)(',')
                    JsonProperty
                      JsonReferenceExpression
                        PsiElement(IDENTIFIER)('nested')
                      PsiElement(:)(':')
                      JsonObject
                        PsiElement({)('{')
                        JsonProperty
                          JsonReferenceExpression
                            PsiElement(IDENTIFIER)('id')
                          PsiElement(:)(':')
                          JsonStringLiteral
                            PsiElement(SINGLE_QUOTED_STRING)(''item3'')
                        PsiElement(})('}')
                    PsiElement(})('}')
                PsiElement(,)(',')
                JsonProperty
                  JsonReferenceExpression
                    PsiElement(IDENTIFIER)('key4')
                  PsiElement(:)(':')
                  JsonObject
                    PsiElement({)('{')
                    JsonProperty
                      JsonReferenceExpression
                        PsiElement(IDENTIFIER)('value')
                      PsiElement(:)(':')
                      JsonNumberLiteral
                        PsiElement(NUMBER)('40')
                    PsiElement(,)(',')
                    JsonProperty
                      JsonReferenceExpression
                        PsiElement(IDENTIFIER)('nested')
                      PsiElement(:)(':')
                      JsonObject
                        PsiElement({)('{')
                        JsonProperty
                          JsonReferenceExpression
                            PsiElement(IDENTIFIER)('id')
                          PsiElement(:)(':')
                          JsonStringLiteral
                            PsiElement(SINGLE_QUOTED_STRING)(''item4'')
                        PsiElement(})('}')
                    PsiElement(})('}')
                PsiElement(,)(',')
                JsonProperty
                  JsonReferenceExpression
                    PsiElement(IDENTIFIER)('key5')
                  PsiElement(:)(':')
                  JsonObject
                    PsiElement({)('{')
                    JsonProperty
                      JsonReferenceExpression
                        PsiElement(IDENTIFIER)('value')
                      PsiElement(:)(':')
                      JsonNumberLiteral
                        PsiElement(NUMBER)('50')
                    PsiElement(,)(',')
                    JsonProperty
                      JsonReferenceExpression
                        PsiElement(IDENTIFIER)('nested')
                      PsiElement(:)(':')
                      JsonObject
                        PsiElement({)('{')
                        JsonProperty
                          JsonReferenceExpression
                            PsiElement(IDENTIFIER)('id')
                          PsiElement(:)(':')
                          JsonStringLiteral
                            PsiElement(SINGLE_QUOTED_STRING)(''item5'')
                        PsiElement(})('}')
                    PsiElement(})('}')
                PsiElement(})('}')
    GherkinScenario:
      PsiElement(SCENARIO_KEYWORD)('Scenario:')
      PsiElement(TEXT)('JSON expression syntax')
      GherkinStep:var
        PsiElement(STEP_KEYWORD)('Given')
        PsiElement(TEXT)('var')
        PsiElement(OPERATOR)('=')
        PsiElement(DOUBLE_QUOTED_STRING)('"Hello"')
      GherkinStep:a
        PsiElement(STEP_KEYWORD)('Given')
        PsiElement(TEXT)('a')
        PsiElement(OPERATOR)('=')
        GherkinPystring
          PsiElement(PYSTRING_QUOTES)('"""')
          KarateEmbeddedJsonElement(json_element)
            KarateEmbeddedJsonElement(json_element)
              JsonObject
                PsiElement({)('{')
                JsonProperty
                  JsonStringLiteral
                    PsiElement(DOUBLE_QUOTED_STRING)('"withoutQuotes"')
                  PsiElement(:)(':')
                  JsonReferenceExpression
                    PsiElement(IDENTIFIER)('#(var)')
                PsiElement(,)(',')
                JsonProperty
                  JsonStringLiteral
                    PsiElement(DOUBLE_QUOTED_STRING)('"withQuotes"')
                  PsiElement(:)(':')
                  JsonReferenceExpression
                    PsiElement(IDENTIFIER)('"#(var)"')
                PsiElement(})('}')
          PsiElement(PYSTRING_QUOTES)('"""')